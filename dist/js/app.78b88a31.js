(function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);f&&f(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==s[o]&&(a=!1)}a&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},i={app:0},s={app:0},r=[];function o(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"34fce358","chunk-22013fc8":"4578bce8","chunk-6b2cb756":"f26718f5"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-22013fc8":1,"chunk-6b2cb756":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var a="css/"+({about:"about"}[e]||e)+"."+{about:"31d6cfe0","chunk-22013fc8":"af97d5ab","chunk-6b2cb756":"73bd253c"}[e]+".css",s=l.p+a,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var c=r[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],u=c.getAttribute("data-href");if(u===a||u===s)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete i[e],f.parentNode.removeChild(f),n(r)},f.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){i[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=o(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",d.name="ChunkLoadError",d.type=a,d.request=i,n[1](d)}s[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0208":function(e,t,n){"use strict";n("4778")},"13a2":function(e,t,n){},"26db":function(e,t,n){"use strict";n("b085")},"38a9":function(e,t,n){"use strict";n("d708")},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id="4678"},4778:function(e,t,n){},4846:function(e,t,n){"use strict";n("c8dd")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("6597"),n("5abe");var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{attrs:{id:"app"}},[n("Header"),n("router-view"),n("Footer")],1)])},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"navbar has-shadow",attrs:{role:"navigation","aria-label":"main navigation"}},[e._m(0),n("div",{staticClass:"navbar-menu",attrs:{id:"menu"}},[n("div",{staticClass:"navbar-end"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[e._v(" Home ")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/schedule"}},[e._v(" Agenda ")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/planning"}},[e._v(" Planning ")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/gantt"}},[e._v(" Gantt ")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/kanban"}},[e._v(" Kanban ")])],1)])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item",attrs:{href:"/"}},[a("figure",{staticClass:"image"},[a("img",{staticClass:"logo_crm",attrs:{height:"30",alt:"logo",src:n("8443")}})])]),a("a",{staticClass:"navbar-burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"menu"}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])])}],o=(n("fb6a"),n("d3b7"),n("159b"),{data:function(){return{connect:null}},mounted:function(){this.connect=this.$store.getters.isConnected,document.addEventListener("DOMContentLoaded",(function(){var e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.target,n=document.getElementById(t);e.classList.toggle("is-active"),n.classList.toggle("is-active")}))}))}))}}),l=o,c=(n("76d2"),n("0c7c")),u=Object(c["a"])(l,s,r,!1,null,"1ec415ce",null),d=u.exports,f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},p=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer is-paddingless"},[n("div",{staticClass:"content has-text-centered columns is-vcentered is-centered"},[n("div",{staticClass:"column is-12"},[e._v(" Designed by "),n("a",{attrs:{href:"https://rintio.com"}},[e._v("RINTIO")]),e._v(". The source code is owned by "),n("a",{attrs:{href:"https://crm-pour-pme.fr/"}},[e._v("SIMPL")]),e._v(". ")])])])}],h={},m=h,g=(n("0208"),Object(c["a"])(m,f,p,!1,null,"528e7c8e",null)),b=g.exports,v={name:"App",components:{Header:d,Footer:b},methods:{sum:function(e,t){return e+t}}},C=v,y=(n("26db"),Object(c["a"])(C,a,i,!1,null,"4b6a647a",null)),w=y.exports,k=n("289d"),_=n("2b0e"),x=n("130e"),j=n("3b68"),S=n.n(j),D=n("bc3a"),T=n.n(D),L=(n("3ca3"),n("ddb0"),n("b0c0"),n("8c4f")),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("HelloWorld",{attrs:{msg:"welcome to our showcase"}})],1)},I=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container"},[n("div",{staticClass:"\n      columns\n      is-multiline\n      has-text-centered\n      is-centered is-vcentered\n      py-auto\n    "},[n("div",{staticClass:"column mt-6 is-12 block"},[n("h1",{staticClass:"is-size-1"},[e._v(e._s(e.msg))])]),n("div",{staticClass:"column is-12"},[n("div",{staticClass:"\n          columns\n          is-multiline\n          has-text-left-desktop has-text-centered-touch\n        "},[e._m(0),n("div",{staticClass:"column is-one-third-desktop is-12-touch"},[e.connected?e._e():n("form",{attrs:{action:"",method:"post"},on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[n("div",{staticClass:"card p-6",staticStyle:{width:"auto"}},[e._m(1),n("section",{staticClass:"card-body"},[n("b-field",{attrs:{label:"Identifiant"}},[n("b-input",{attrs:{type:"text",placeholder:"Votre email",required:""},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1),n("b-field",{attrs:{label:"Mot de passe"}},[n("b-input",{attrs:{type:"password","password-reveal":"",placeholder:"Votre mot de passe",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("footer",{staticClass:"is-centered mt-6 mb-4"},[n("button",{staticClass:"button is-danger",class:e.loading?"is-loading":"",attrs:{type:"submit"}},[e._v(" Login ")])]),e.success?n("span",{staticClass:"is-size-6 has-text-success"},[e._v(" "+e._s(e.success)+" ")]):e._e()])]),e.connected?n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("h3",{staticClass:"is-size-2"},[e._v("Modules")]),n("div",{staticClass:"content"},[n("ul",[n("li",[n("router-link",{staticClass:"has-text-success",attrs:{to:"/schedule"}},[e._v("Agenda")])],1),n("li",[n("router-link",{staticClass:"has-text-success",attrs:{to:"/planning"}},[e._v("Planning")])],1),n("li",[n("router-link",{staticClass:"has-text-success",attrs:{to:"/gantt"}},[e._v("Gantt")])],1),n("li",[n("router-link",{staticClass:"has-text-success",attrs:{to:"/kanban"}},[e._v("Kanban")])],1)])])])]):e._e()])])])])])},E=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column"},[n("p",[e._v(" An Vuejs project for testing simpleCRM components in 2.0 envionnment"),n("br"),n("br"),n("a",{attrs:{href:"https://github.com/Flora24-Yedidya/SimpleCRM-Agenda/blob/main/README.md",target:"_blank",rel:"noopener"}},[e._v("Get documentation here ")]),e._v(". ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"card-head mb-6"},[n("p",{staticClass:"card-title is-size-1"},[e._v("Login")])])}],O=(n("e9c4"),{isAuth:!1,token:"",idUser:"",authenticate:function(e,t){var n={method:"post",url:"https://0002-zebridge-dev-externe.api.crm-simple.com/authentification",headers:{"Content-Type":"application/json"},data:JSON.stringify({identifiant:e,motdepasse:t})},a=this;return T()(n).then((function(e){return a.isAuth=!0,a.token=e.data.token,a.idUser=e.data.id,e.data})).catch((function(e){console.log(e)}))},getToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"admin",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Dw3BwezaQSar";return this.authenticate(e,t)}}),U={name:"HelloWorld",props:{msg:String,user:{type:String,default:"admin"},password:{type:String,default:"Dw3BwezaQSar"}},data:function(){return{token:"",loading:!1,success:"",connected:!1}},methods:{login:function(){var e=this;this.loading=!0,this.success="",O.getToken(this.user,this.password).then((function(t){e.loading=!1,e.token=t.token,e.$store.commit("updateAuth",!0),e.$store.commit("updateToken",t.token),e.$store.commit("updateIdUser",t.id),e.success="Vous êtes authentifié",e.connected=!0})).catch((function(t){e.success="Erreur authentifcation",console.log(t),e.loading=!1}))}}},P=U,M=(n("38a9"),Object(c["a"])(P,A,E,!1,null,"7b86002a",null)),N=M.exports,z={name:"Home",components:{HelloWorld:N}},Y=z,$=(n("4846"),Object(c["a"])(Y,R,I,!1,null,"21c75624",null)),B=$.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"columns is-multiline has-text-centered"},[e._m(0),"undefined"!=e.token?n("div",{staticClass:"column is-12"},[n("agenda",{attrs:{API_KEY:e.token}})],1):e._e()])])},F=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column is-12"},[n("h1",{staticClass:"is-size-1"},[e._v("Agenda")])])}],K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columns is-multiline is-mobile"},[n("b-loading",{attrs:{"is-full-page":e.isFullPage,"can-cancel":!0},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),n("div",{staticClass:"column is-12"},[n("div",{staticClass:"is-flex-widescreen is-flex-wrap-wrap is-justify-content-space-between is-align-items-center px-6 py-2 has-text-left"},[n("div",{staticClass:"is-flex-widescreen is-align-items-center"},[n("div",{staticClass:"is-flex-tablet is-flex-wrap-wrap is-align-items-center mr-2 mb-2"},[e._m(0),n("div",{staticClass:"control is-flex-grow-2"},[n("div",{staticClass:"dropdown is-block is-fullwidth",class:e.showing},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button is-fullwidth is-justify-content-space-between",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:e.show}},[n("span",{staticClass:"icon-text"},[n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-circle",style:{color:e.typeview.color}})]),n("span",[e._v(e._s(e.typeview.title))])]),e._m(1)])]),n("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[n("div",{staticClass:"dropdown-content"},[e._l(e.arrayFilter,(function(t,a){return n("a",{key:a,staticClass:"dropdown-item",attrs:{value:t.title},on:{click:function(n){return e.setView(t)}}},[n("span",{staticClass:"icon-text"},[n("span",{staticClass:"icon",style:{color:t.color}},[n("i",{staticClass:"fas fa-circle"})]),n("span",[e._v(e._s(t.title))])])])})),n("hr",{staticClass:"dropdown-divider"})],2)])])])]),n("div",{staticClass:"is-flex-tablet is-flex-wrap-wrap is-align-items-center mr-2 mb-2"},[n("label",{staticClass:"label pt-2"},[e._v("Utilisateurs :  ")]),n("div",{staticClass:"control is-flex-grow-2"},[n("div",{staticClass:"select is-block"},[n("multiselect",{attrs:{options:e.users,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Selectionnez",label:"name","track-by":"name","preselect-first":!0},on:{close:e.dispatchAction},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,i=(t.search,t.isOpen);return[a.length&&!i?n("span",{staticClass:"multiselect__single"},[e._v(e._s(a.length)+" selections")]):e._e()]}}]),model:{value:e.selectedUsers,callback:function(t){e.selectedUsers=t},expression:"selectedUsers"}})],1)])]),n("div",{staticClass:"is-flex-tablet is-align-items-center is-justify-content-end mb-2 mr-2"},[n("div",{staticClass:"control is-flex is-flex-grow-2"},[n("span",{staticClass:"is-hidden-mobile is-block-tablet-only is-hidden-widescreen"},[e._v("                          ")]),n("div",{staticClass:"select is-flex-grow-2 is-flex"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.view,expression:"view"}],staticClass:"is-flex-grow-2",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.view=t.target.multiple?n:n[0]}}},e._l(e.viewModeOptions,(function(t,a){return n("option",{key:a,domProps:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),0)])])]),n("label",{staticClass:"label is-flex-tablet is-flex-wrap-wrap is-align-items-center mr-2 mb-2",attrs:{for:"history"}},[e._v(" Historique"),n("span",{staticClass:"is-hidden-widescreen"},[e._v("   ")]),e._v(" :   "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.history,expression:"history"}],attrs:{type:"checkbox",id:"history"},domProps:{checked:Array.isArray(e.history)?e._i(e.history,null)>-1:e.history},on:{click:e.dispatchAction,change:function(t){var n=e.history,a=t.target,i=!!a.checked;if(Array.isArray(n)){var s=null,r=e._i(n,s);a.checked?r<0&&(e.history=n.concat([s])):r>-1&&(e.history=n.slice(0,r).concat(n.slice(r+1)))}else e.history=i}}})])]),n("div",{staticClass:"is-flex is-flex-wrap-wrap is-justify-content-center is-align-items-center"},[n("div",{staticClass:"mr-2 mb-2 text-center"},[n("strong",{staticClass:"is-size-5"},[e._v(e._s(e.renderRange))])]),n("div",{staticClass:"is-flex is-flex-grow-2 is-align-items-center"},[n("div",{staticClass:"mr-2 mb-2"},[n("button",{staticClass:"button is-flex is-align-items-center is-outlined flat-button",attrs:{type:"button","data-action":"move-prev"},on:{click:function(t){return e.prev()}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"}})])])]),n("div",{staticClass:"mr-2 mb-2 is-flex-grow-2"},[n("button",{staticClass:"button is-block is-fullwidth is-outlined flat-button",attrs:{type:"button","data-action":"move-today"},on:{click:function(t){return e.today()}}},[e._v(" Aujourd'hui ")])]),n("div",{staticClass:"mr-2 my-2"},[n("button",{staticClass:"button is-flex is-align-items-center is-outlined flat-button",attrs:{type:"button","data-action":"move-next"},on:{click:function(t){return e.next()}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}})])])])])])])]),n("div",{staticClass:"column is-12",attrs:{id:"calendar"}},[n("Calendar",{ref:"tuiCalendar",staticStyle:{height:"800px",width:"100%"},attrs:{view:e.view,calendars:e.calendarList,schedules:e.CscheduleList,taskView:e.taskView,scheduleView:e.scheduleView,theme:e.theme,week:e.week,month:e.month,useCreationPopup:e.useCreationPopup,useDetailPopup:e.useDetailPopup,timezones:e.timezones,disableDblClick:e.disableDblClick,isReadOnly:e.isReadOnly,template:e.template},on:{beforeCreateSchedule:e.onBeforeCreateSchedule,beforeDeleteSchedule:e.onBeforeDeleteSchedule,beforeUpdateSchedule:e.onBeforeUpdateSchedule,clickDayname:e.onClickDayname,clickSchedule:e.onClickSchedule,clickTimezonesCollapseBtn:e.onClickTimezonesCollapseBtn}}),e.selected||e.creating?n("div",{staticClass:"tui-full-calendar-floating-layer",staticStyle:{display:"block",position:"absolute","z-index":"1000"},attrs:{id:"floating-layer-container"}},[e.editing?e._e():n("div",{staticClass:"tui-full-calendar-popup tui-full-calendar-popup-detail"},[e.selected&&!e.editing?n("div",{staticClass:"tui-full-calendar-popup-container"},[n("div",{staticClass:"tui-full-calendar-popup-section tui-full-calendar-section-header"},[n("div",[n("span",{staticClass:"tui-full-calendar-schedule-private tui-full-calendar-icon tui-full-calendar-ic-private"}),n("span",{staticClass:"tui-full-calendar-schedule-title"},[e._v(e._s(e.selected.schedule.title))])]),n("div",{staticClass:"tui-full-calendar-popup-detail-date tui-full-calendar-content"},[e._v(" "+e._s(e.getTemplate().popupDetailDate(e.selected.schedule.isAllDay,e.selected.schedule.start,e.selected.schedule.end))+" ")])]),n("div",{staticClass:"tui-full-calendar-section-detail"},[e.selected.schedule.location?n("div",{staticClass:"tui-full-calendar-popup-detail-item"},[n("span",{staticClass:"tui-full-calendar-icon tui-full-calendar-ic-location-b"}),n("span",{staticClass:"tui-full-calendar-content"},[e._v(e._s(e.getTemplate().popupDetailLocation(e.selected.schedule)))])]):e._e(),n("div",{staticClass:"tui-full-calendar-popup-detail-item"},[n("span",{staticClass:"tui-full-calendar-icon tui-full-calendar-ic-state-b"}),n("span",{staticClass:"tui-full-calendar-content"},[e._v(" "+e._s(e.getTemplate().popupDetailState(e.selected.schedule)))])]),n("div",{staticClass:"tui-full-calendar-popup-detail-item"},[n("span",{staticClass:"tui-full-calendar-icon tui-full-calendar-calendar-dot",style:{backgroundColor:e.getCalendar(e.selected.schedule.calendarId).bgColor}}),n("span",{staticClass:"tui-full-calendar-content"},[e._v(e._s(e.getCalendar(e.selected.schedule.calendarId).name))])])]),e.selected.schedule.isReadOnly?e._e():n("div",{staticClass:"tui-full-calendar-section-button"},[n("button",{staticClass:"tui-full-calendar-popup-edit",on:{click:function(t){return e.edit()}}},[n("span",{staticClass:"tui-full-calendar-icon tui-full-calendar-ic-edit"}),n("span",{staticClass:"tui-full-calendar-content"},[e._v("Modifier")])]),n("div",{staticClass:"tui-full-calendar-popup-vertical-line"}),n("button",{staticClass:"tui-full-calendar-popup-delete",on:{click:function(t){return e.onBeforeDeleteSchedule(e.selected)}}},[n("span",{staticClass:"tui-full-calendar-icon tui-full-calendar-ic-delete"}),n("span",{staticClass:"tui-full-calendar-content"},[e._v("Supprimer")])])])]):e._e(),e.selected&&!e.editing?n("div",{staticClass:"tui-full-calendar-popup-top-line",style:{backgroundColor:e.getCalendar(e.selected.schedule.calendarId).bgColor}}):e._e(),e.selected&&!e.editing?n("div",{staticClass:"tui-full-calendar-popup-arrow tui-full-calendar-arrow-left",attrs:{id:"tui-full-calendar-popup-arrow"}},[e._m(2)]):e._e()]),e.editing||e.creating?n("iframe",{ref:"editdata",attrs:{title:"iframe",id:"tui-full-calendar-popup-iframe",referrerpolicy:"unsafe-url",src:e.creating?e.URI_ACTION_CREATION+"?date_debut="+e.dateCreateEvent:e.URI_ACTION_UPDATE+e.selected.schedule.id,width:"100%",height:"100%",allow:"camera *; geolocation *; microphone *; autoplay *",name:"editdata"},on:{load:e.checkingFrame,pageshow:e.checkingFrame}}):e._e()]):e._e()],1)],1)},V=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label pt-2"},[e._v(" Affichage "),n("span",{staticClass:"is-hidden-widescreen"},[e._v("  ")]),e._v(" :   ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-full-calendar-popup-arrow-border"},[n("div",{staticClass:"tui-full-calendar-popup-arrow-fill"})])}],G=n("5530"),q=n("2909"),W=n("1da1"),J=(n("96cf"),n("7db0"),n("d81d"),n("25f0"),n("4de4"),n("0481"),n("4069"),n("99af"),n("ac1f"),n("1276"),n("a15b"),n("c740"),n("5319"),n("caad"),n("2532"),n("3700")),Q=(n("ad01"),n("6ca0"),n("d2c9"),n("c1df")),X=n.n(Q),Z={"common.border":"1px solid #ddd","common.backgroundColor":"white","common.holiday.color":"#f54f3d","common.saturday.color":"#135de6","common.dayname.color":"#333","common.today.color":"#009688","common.creationGuide.backgroundColor":"rgba(19, 93, 230, 0.1)","common.creationGuide.border":"1px solid #135de6","month.dayname.height":"42px","month.dayname.borderLeft":"none","month.dayname.paddingLeft":"0","month.dayname.paddingRight":"0","month.dayname.fontSize":"13px","month.dayname.backgroundColor":"inherit","month.dayname.fontWeight":"normal","month.dayname.textAlign":"center","month.holidayExceptThisMonth.color":"#f3acac","month.dayExceptThisMonth.color":"#bbb","month.weekend.backgroundColor":"#fafafa","month.day.fontSize":"16px","month.schedule.height":"18px","month.schedule.marginTop":"2px","month.schedule.marginLeft":"10px","month.schedule.marginRight":"10px","month.moreView.boxShadow":"none","month.moreView.paddingBottom":"0","month.moreViewTitle.height":"28px","month.moreViewTitle.marginBottom":"0","month.moreViewTitle.backgroundColor":"#f4f4f4","month.moreViewTitle.borderBottom":"1px solid #ddd","month.moreViewTitle.padding":"0 10px","month.moreViewList.padding":"10px","week.dayname.height":"41px","week.dayname.borderTop":"1px solid #ddd","week.dayname.borderBottom":"1px solid #ddd","week.dayname.borderLeft":"1px solid #ddd","week.dayname.paddingLeft":"5px","week.dayname.backgroundColor":"inherit","week.dayname.textAlign":"left","week.today.color":"#009688","week.pastDay.color":"#999","week.vpanelSplitter.border":"1px solid #ddd","week.vpanelSplitter.height":"3px","week.daygrid.borderRight":"1px solid #ddd","week.daygridLeft.width":"100px","week.daygridLeft.backgroundColor":"","week.daygridLeft.paddingRight":"5px","week.daygridLeft.borderRight":"1px solid #ddd","week.today.backgroundColor":"inherit","week.weekend.backgroundColor":"inherit","week.timegridLeft.width":"100px","week.timegridLeft.backgroundColor":"#fafafa","week.timegridLeft.borderRight":"1px solid #ddd","week.timegridLeft.fontSize":"12px","week.timegridLeftTimezoneLabel.height":"51px","week.timegridLeftAdditionalTimezone.backgroundColor":"#fdfdfd","week.timegridOneHour.height":"48px","week.timegridHalfHour.height":"24px","week.timegridHalfHour.borderBottom":"1px dotted #f9f9f9","week.timegridHorizontalLine.borderBottom":"1px solid #eee","week.timegrid.paddingRight":"10px","week.timegrid.borderRight":"1px solid #ddd","week.timegridSchedule.borderRadius":"0","week.timegridSchedule.paddingLeft":"0","week.currentTime.color":"#135de6","week.currentTime.fontSize":"12px","week.currentTime.fontWeight":"bold","week.pastTime.color":"#999","week.pastTime.fontWeight":"normal","week.futureTime.color":"#333","week.futureTime.fontWeight":"normal","week.currentTimeLinePast.border":"1px solid rgba(19, 93, 230, 0.3)","week.currentTimeLineBullet.backgroundColor":"#135de6","week.currentTimeLineToday.border":"1px solid #135de6","week.currentTimeLineFuture.border":"1px solid #135de6","week.creationGuide.color":"#135de6","week.creationGuide.fontSize":"12px","week.creationGuide.fontWeight":"bold","week.dayGridSchedule.borderRadius":"0","week.dayGridSchedule.height":"18px","week.dayGridSchedule.marginTop":"2px","week.dayGridSchedule.marginLeft":"10px","week.dayGridSchedule.marginRight":"10px"},ee=n("8e5f"),te=n.n(ee),ne=(n("e607"),{components:{Calendar:J["Calendar"],Multiselect:te.a},props:{API_KEY:{type:String,default:function(){return""}},URI:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/interactions/"}},URI_HISTORY:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/interactionshistorique/"}},URI_ACTION:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/interaction/"}},URI_ACTION_CREATION:{type:String,default:function(){return"https://0002-zebridge-dev-externe.crm-simple.com/action_edit.php"}},URI_ACTION_UPDATE:{type:String,default:function(){return"https://0002-zebridge-dev-externe.crm-simple.com/action_edit.php?idaction="}},locale:{type:String,default:function(){return"fr-FR"}},calendarList:{type:Array,default:function(){return[{id:"0",name:"Private",bgColor:"#9e5fff",borderColor:"#9e5fff"},{id:"1",name:"Company",bgColor:"#00a9ff",borderColor:"#00a9ff"}]}},USER_API:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/utilisateurs/"}},arrayFilter:{type:Array,default:function(){return[{color:"#2251ff",title:"Défaut",index:"color_defaut"},{color:"#ffcedf0",title:"Etat",index:"color_etat"},{color:"#25ffcd",title:"Priorité",index:"color_priorite"},{color:"#de452a",title:"Utilisateur",index:"color_utilisateur"},{color:"#cdee00",title:"Type",index:"color_type"},{color:"#e19400",title:"Priorité échéance",index:"color_priorite_echeance"}]}},idUtilisateurs:{type:Array,default:function(){return["1","2","3","4","5","6","7","8","9"]}},idprojets:{type:Array,default:function(){return[]}},idcontacts:{type:Array,default:function(){return[]}},idsocietes:{type:Array,default:function(){return[]}},scheduleList:{type:Array,default:function(){return[]}},viewModeOptions:{type:Array,default:function(){return[{title:"Mois",value:"month"},{title:"Semaine",value:"week"},{title:"Jour",value:"day"}]}},dateRange:{type:Array,default:function(){return[X()().subtract(1,"month").toDate(),X()().toDate()]}},timezones:{type:Array,default:function(){return[{name:"Europe/Paris",label:"Paris",offset:"+01:00"}]}},month:{type:Object,default:function(){return{startDayOfWeek:1,daynames:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]}}},week:{type:Object,default:function(){return{showTimezoneCollapseButton:!0,timezonesCollapsed:!0,daynames:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],startDayOfWeek:1}}},taskView:{type:Boolean,default:function(){return!0}},scheduleView:{type:Array,default:function(){return["time"]}},disableDblClick:{type:Boolean,default:function(){return!0}},isReadOnly:{type:Boolean,default:function(){return!1}},useCreationPopup:{type:Boolean,default:function(){return!1}},useDetailPopup:{type:Boolean,default:function(){return!1}}},data:function(){return{users:[],selectedUsers:[],editing:!1,history:!1,creating:!1,clickCount:0,selected:null,isFullPage:!1,isLoading:!0,info:null,event:null,view:"month",isComponentModalActive:!1,renderRange:null,startDate:"",endDate:"",dateCreateEvent:"",form:{sujet:"",color:"",date_debut:"",date_fin:"",submit:!1},errors:{sujet:"Le champs titre est obligatoire",date_debut:"Le date debut est obligatoire",date_fin:"Le date fin est obligatoire",color:"Le champs couleur est obligatoire"},template:this.getTemplate(),theme:Z,CscheduleList:[],showing:"",typeview:{title:"Selectionnez",color:"#2251ff",index:"color_defaut"}}},methods:{show:function(){this.showing=0===this.showing.length?"is-active":""},setView:function(e){this.typeview=e,this.show(),this.dispatchAction()},isUserSelected:function(e){return this.idUtilisateurs.find(e)>0},loadUsers:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T()({method:"get",url:e.USER_API+e.API_KEY,headers:{"Content-Type":"application/json"}}).then((function(t){1===t.data.result?(e.users=t.data.data.map((function(e){return{id:e.idutilisateur.value.toString(),name:e.nom_utilisateur.value.toString()}})),e.selectedUsers=e.users.filter((function(t){return t.id in e.idUtilisateurs}))):console.log(t.data.err_message)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},dispatchAction:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getCalendarItem(0,!1).then((function(e){return e.flat(1/0)}));case 3:return e.CscheduleList=t.sent,t.t0=e.CscheduleList,t.next=7,e.getCalendarItem(0,!0).then((function(e){return e.flat(1/0)}));case 7:if(t.t1=t.sent,e.CscheduleList=t.t0.concat.call(t.t0,t.t1),!e.history){t.next=15;break}return t.t2=e.CscheduleList,t.next=13,e.getIteractionsHistory(0).then((function(e){return e.flat(1/0)}));case 13:t.t3=t.sent,e.CscheduleList=t.t2.concat.call(t.t2,t.t3);case 15:e.isLoading=!1;case 16:case"end":return t.stop()}}),t)})))()},setColor:function(e,t){var n=e.color;try{var a=t.color.value;n=JSON.parse(a)[e.index]}catch(i){console.log("undefined color data")}return n},getTemplate:function(){var e=this;return{milestone:function(e){return'<span class="calendar-font-icon ic-milestone-b"></span> <span style="background-color: '+e.bgColor+'">'+e.title+"</span>"},milestoneTitle:function(){return'<span class="tui-full-calendar-left-content">ETAPE</span>'},task:function(e){return"#"+e.title},taskTitle:function(){return'<span class="tui-full-calendar-left-content">TACHE</span>'},allday:function(t){return e._getTimeTemplate(t,!0)},alldayTitle:function(){return'<span class="tui-full-calendar-left-content"> Toute la journée</span>'},time:function(t){return e._getTimeTemplate(t,!1)},goingDuration:function(e){return'<span class="calendar-icon ic-travel-time"></span>'+e.goingDuration+"min."},comingDuration:function(e){return'<span class="calendar-icon ic-travel-time"></span>'+e.comingDuration+"min."},monthMoreTitleDate:function(e,t){var n=e.split(".")[2];return'<span class="tui-full-calendar-month-more-title-day">'+n+'</span> <span class="tui-full-calendar-month-more-title-day-label">'+t+"</span>"},monthMoreClose:function(){return'<span class="tui-full-calendar-icon tui-full-calendar-ic-close"></span>'},monthGridHeader:function(e){var t=parseInt(e.date.split("-")[2],10),n=["tui-full-calendar-weekday-grid-date "];return e.isToday&&n.push("tui-full-calendar-weekday-grid-date-decorator"),'<span class="'+n.join(" ")+'">'+t+"</span>"},monthGridHeaderExceed:function(e){return'<span class="weekday-grid-more-schedules">+'+e+"</span>"},monthGridFooter:function(){return""},monthGridFooterExceed:function(){return""},monthDayname:function(e){return e.label.toString().toLocaleUpperCase()},weekDayname:function(e){return'<span class="tui-full-calendar-dayname-date">'+e.date+'</span>&nbsp;&nbsp;<span class="tui-full-calendar-dayname-name">'+e.dayName+"</span>"},weekGridFooterExceed:function(e){return"+"+e},dayGridTitle:function(e){var t="";switch(e){case"milestone":t='<span class="tui-full-calendar-left-content">ETAPE</span>';break;case"task":t='<span class="tui-full-calendar-left-content">TACHE</span>';break;case"allday":t='<span class="tui-full-calendar-left-content">Toute la journée</span>';break;default:break}return t},collapseBtnTitle:function(){return'<span class="tui-full-calendar-icon tui-full-calendar-ic-arrow-solid-top"></span>'},timegridDisplayPrimayTime:function(e){return e.hour.toString()},timegridCurrentTime:function(e){var t=[];return e.dateDifference&&t.push("["+e.dateDifferenceSign+e.dateDifference+"]<br>"),t.push(X()(e.hourmarker).format("HH:mm")),t.join("")},popupIsAllDay:function(){return"Toute la journée"},popupStateFree:function(){return"Libre"},popupStateBusy:function(){return"Occupé"},titlePlaceholder:function(){return"Sujet"},locationPlaceholder:function(){return"Lieu"},startDatePlaceholder:function(){return"Date de Début"},endDatePlaceholder:function(){return"Date de fin"},popupSave:function(){return"Valider"},popupUpdate:function(){return"Mettre à jour"},popupDetailDate:function(e,t,n){var a=X()(t).isSame(n),i=(a?"":"YYYY/MM/DD ")+"HH:mm";return e?X()(t).format("YYYY/MM/DD")+(a?"":" - "+X()(n).format("YYYY/MM/DD")):X()(t.toDate()).format("YYYY/MM/DD HH:mm")+" - "+X()(n.toDate()).format(i)},popupDetailLocation:function(e){return"Lieu : "+e.location},popupDetailState:function(e){return" Statut: "+e.state==="Free"?"Libre":"Occupé"},popupDetailRepeat:function(e){return"Repeat : "+e.recurrenceRule},popupDetailBody:function(e){return"Body : "+e.body},popupEdit:function(){return"Modifier"},popupDelete:function(){return"Supprimer"}}},_getTimeTemplate:function(e,t){var n=[];return t||n.push("<strong>"+X()(e.start.toDate()).format("HH:mm")+"</strong> "),e.isPrivate?(n.push('<span class="calendar-font-icon ic-lock-b"></span>'),n.push(" Private")):(e.isReadOnly?n.push('<span class="calendar-font-icon ic-readonly-b"></span>'):e.recurrenceRule?n.push('<span class="calendar-font-icon ic-repeat-b"></span>'):e.attendees.length?n.push('<span class="calendar-font-icon ic-user-b"></span>'):e.location&&n.push('<span class="calendar-font-icon ic-location-b"></span>'),n.push(" "+e.title)),n.join("")},setRenderRangeText:function(){var e=this.$refs.tuiCalendar.invoke("getOptions"),t=this.$refs.tuiCalendar.invoke("getViewName"),n=[];if(this.startDate=this.$refs.tuiCalendar.invoke("getDateRangeStart").toDate().toLocaleDateString("fr-CA"),this.endDate=this.$refs.tuiCalendar.invoke("getDateRangeEnd").toDate().toLocaleDateString("fr-CA"),"day"===t)n.push(this.currentCalendarDate("DD MMMM YYYY"));else if("month"===t&&(!e.month.visibleWeeksCount||e.month.visibleWeeksCount>4))n.push(this.currentCalendarDate("MMMM YYYY"));else{var a=X()(this.$refs.tuiCalendar.invoke("getDateRangeStart").getTime()),i=new Date(a),s=new Date(i.getFullYear(),0,1),r=Math.floor((i-s)/864e5),o=Math.ceil((i.getDay()+1+r)/7);n.push("Semaine "+o+" | "+X()(this.$refs.tuiCalendar.invoke("getDateRangeStart").getTime()).locale(this.locale).format("DD MMMM YYYY")),n.push(" - "),n.push(X()(this.$refs.tuiCalendar.invoke("getDateRangeEnd").getTime()).locale(this.locale).format("DD MMMM YYYY"))}this.renderRange=n.join("")},generateQueryFor:function(e,t,n){return e.length>0&&(n=n.concat(0===n.length?"condition:":":separator:AND:condition:",this.setfilter(e,t))),n},getQueryParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"date_action",t="";return this.selectedUsers.length>0&&(t=t.concat(0===t.length?"condition:":":separator:AND:condition:",this.setfilter(this.selectedUsers.map((function(e){return e.id})),"idutilisateur"))),this.idprojets.length>0&&(t=t.concat(0===t.length?"condition:":":separator:AND:condition:",this.setfilter(this.idprojets,"idprojet"))),this.idcontacts.length>0&&(t=t.concat(0===t.length?"condition:":":separator:AND:condition:",this.setfilter(this.idcontacts,"idcontact"))),this.idsocietes.length>0&&(t=t.concat(0===t.length?"condition:":":separator:AND:condition:",this.setfilter(this.idsocietes,"idsociete"))),t=t.concat(0===t.length?"condition:":":separator:AND:condition:",e+":biggerthanoregal:"+this.startDate+":AND:"+e+":lowerthanoregal:"+this.endDate),t},setfilter:function(e,t){return 1===e.length?t+":egal:"+e[0]:t+":egal:"+e[0]+":OR:"+this.setfilter(e.slice(1),t)},getCalendarItem:function(){var e=arguments,t=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:0,i=e.length>1&&void 0!==e[1]&&e[1],n.abrupt("return",T()({method:"get",url:t.URI+t.API_KEY+"/"+t.getQueryParam(i?"date_echeance":"date_action")+"/"+a,headers:{"Content-Type":"application/json"}}).then((function(e){if(e.data.data.length>0){var n=e.data.data.map((function(e){return{start:e.date_action.value,end:e.date_fin.value,isReadOnly:"1"===e.e_lock.value,location:e.location.value,idaction:e.idaction.value,title:e.sujet.value,bgColor:i&&"color_priorite"!=t.typeview.index?"#f2a640":t.setColor(t.typeview,e),category:"time",dueDateClass:e.date_echeance.value,id:e.idaction.value.toString(),calendarId:t.getCalendarIdWithColor(e.color.value)||"0"}}));return Promise.all([].concat(Object(q["a"])(n),[t.getCalendarItem(++a,i)]))}return[]})));case 3:case"end":return n.stop()}}),n)})))()},getIteractionsHistory:function(){var e=arguments,t=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:0,n.abrupt("return",T()({method:"get",url:t.URI_HISTORY+t.API_KEY+"/"+t.getQueryParam()+"/"+a,headers:{"Content-Type":"application/json"}}).then((function(e){if(e.data.data.length>0){var n=e.data.data.map((function(e){return{start:e.date_action.value,end:e.date_fin.value,isReadOnly:"1"===e.e_lock.value,location:e.location.value,idaction:e.idaction.value,title:e.sujet.value,bgColor:"#8cbf40",category:"time",dueDateClass:e.date_echeance.value,id:e.idaction.value.toString(),calendarId:t.getCalendarIdWithColor(e.color.value)||"0"}}));return Promise.all([].concat(Object(q["a"])(n),[t.getIteractionsHistory(++a)]))}return[]})));case 2:case"end":return n.stop()}}),n)})))()},currentCalendarDate:function(e){var t=X()([this.$refs.tuiCalendar.invoke("getDate").getFullYear(),this.$refs.tuiCalendar.invoke("getDate").getMonth(),this.$refs.tuiCalendar.invoke("getDate").getDate()]);return t.locale(this.locale).format(e).charAt(0).toUpperCase()+t.locale(this.locale).format(e).slice(1)},getCalendarWithColor:function(e){var t,n=this.calendarList.findIndex((function(t){return t.bgColor===e}));return(null===(t=this.calendarList[n])||void 0===t?void 0:t.bgColor)||"#FFF"},getCalendarIdWithColor:function(e){var t,n=this.calendarList.findIndex((function(t){return t.bgColor===e}));return null===(t=this.calendarList[n])||void 0===t?void 0:t.id},getToday:function(){this.$refs.tuiCalendar.invoke("today"),this.setRenderRangeText(),this.dispatchAction()},next:function(){this.$refs.tuiCalendar.invoke("next"),this.setRenderRangeText(),this.dispatchAction()},prev:function(){this.$refs.tuiCalendar.invoke("prev"),this.setRenderRangeText(),this.dispatchAction()},today:function(){this.$refs.tuiCalendar.invoke("today"),this.setRenderRangeText(),this.dispatchAction()},changeView:function(e){this.$refs.tuiCalendar.invoke("changeView",e)},onClickSchedule:function(e){this.selected=e;var t=document.getElementsByClassName("tui-full-calendar-month-more");t[0].style.display="none"},onClickDayname:function(e){console.group("onClickDayname"),console.log(e.date),console.groupEnd()},onBeforeCreateSchedule:function(e){var t=this;this.event=e;var n=e.start.toDate();this.dateCreateEvent=n.toLocaleDateString("fr-CA")+"_"+(n.getHours()<10?"0":"")+n.getHours()+"-"+(n.getMinutes()<10?"0":"")+n.getMinutes(),e.guide.clearGuideElement(),this.clickCount=0===this.clickCount?1:0,this.creating=0===this.clickCount,setTimeout((function(){t.openIframeEditor()}),50)},onBeforeUpdateSchedule:function(e){var t=this,n=this.CscheduleList.find((function(t){return t.id===e.schedule.id}));e.schedule.start=e.start,e.schedule.end=e.end,n.calendarId=e.changes.calendarId||e.schedule.calendarId,n.title=e.changes.title||e.schedule.title,n.category=e.changes.isAllDay?"allday":"time",n.start=e.start,n.end=e.end,n.isReadOnly=e.changes.isPrivate||e.changes.isReadOnly,n.location=e.changes.location||e.schedule.location,n.bgColor=this.calendarList[e.changes.calendarId||e.schedule.calendarId].bgColor;var a=new Date(e.schedule.start).toISOString();a=String(a).replace("T"," "),a=String(a).replace(".000Z","");var i=e.end.getTime()-e.start.getTime(),s=Math.floor(i/36e5),r=i%36e5,o=Math.floor(r/6e4),l={method:"put",url:this.URI_ACTION+this.API_KEY,headers:{"Content-Type":"application/json"},data:JSON.stringify({idaction:n.idaction,sujet:n.title,all_day:"allday"==n.category?1:0,date_action:a,duree_heures:s,duree_minutes:o,location:n.location,color:n.bgColor,e_lock:n.isReadOnly?1:0})};T()(l).then((function(){t.CscheduleList=t.CscheduleList.map((function(t){return t.id!==e.schedule.id?t:Object(G["a"])(Object(G["a"])({},t),n)})),t.$refs.tuiCalendar.invoke("updateSchedule",e.schedule.id,n)}))},onBeforeDeleteSchedule:function(e){var t,n=this;this.selected=null;var a=null===(t=this.CscheduleList.find((function(t){return t.id===e.schedule.id})))||void 0===t?void 0:t.idaction,i={method:"delete",url:this.URI_ACTION+this.API_KEY+"/"+a,headers:{}};T()(i).then((function(){n.CscheduleList=n.CscheduleList.filter((function(t){return t.id!==e.schedule.id})),n.$refs.tuiCalendar.invoke("deleteSchedule",e.schedule.id,e.schedule.calendarId)}))},onClickTimezonesCollapseBtn:function(e){e?(this.theme["week.timegridLeft.width"]="100px",this.theme["week.daygridLeft.width"]="100px"):(this.theme["week.timegridLeft.width"]="50px",this.theme["week.daygridLeft.width"]="50px")},getCalendar:function(e){return this.calendarList.find((function(t){return t.id===e}))},openIframeEditor:function(){var e=document.getElementById("floating-layer-container");null!=e&&(window.innerWidth>768?(e.style.width="calc(100% - 250px)",e.style.height="calc(100% - 250px)",e.style.left="calc(50% - (calc(100% - 250px) / 2))",e.style.top="calc(50% - (calc(100% - 250px) / 2))"):(e.style.width="calc(100% - 150px)",e.style.left="calc(50% - (calc(100% - 150px) / 2))",e.style.top="calc(50% - (calc(100% - 800px) / 2))",e.style.height="calc(100% - 150px)"))},checkingFrame:function(){console.log(this.$refs.editdata)},edit:function(){this.editing=!0,this.openIframeEditor()},newDateOnCreate:function(){return X()(new Date(this.event.start)).format("YYYY-MM-DD_HH:mm")},iframeLoaded:function(){var e=document.getElementById("tui-full-calendar-popup-iframe");e&&e.contentWindow.location.href.includes("/action.php")&&(this.editing=!1,this.creating=!1,this.selected=null)}},watch:{view:function(e){this.changeView(e),this.setRenderRangeText()},selected:function(e){var t=this;setTimeout((function(){t.editing=!1;var n=null;if(e&&e.event){n=e.event;var a={top:n.pageY-n.target.offsetTop,left:n.pageX-n.target.offsetLeft},i=document.getElementById("floating-layer-container");i&&(i.style.top="calc(".concat(a.top,"px - 80px)"),i.style.left="calc(".concat(a.left,"px + 25px)"))}}),100)}},mounted:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getTemplate(),t.next=3,e.loadUsers();case 3:e.setRenderRangeText(),e.dispatchAction(),document.addEventListener("click",(function(t){!1===document.getElementById("calendar").contains(t.target)&&!e.editing||"tui-full-calendar-weekday-schedule"!==t.target.className&&"tui-full-calendar-weekday-schedule-title"!==t.target.className&&t.target.className.includes("tui-full-calendar-weekday-grid-line")&&"tui-full-calendar-weekday-schedule-content"===t.target.className||t.target.className.includes("tui-full-calendar-time-date-schedule-block-wrap")||(t.target.className.includes("tui-full-calendar-weekday-schedule")||t.target.className.includes("tui-full-calendar-weekday-schedule-content")||t.target.className.includes("tui-full-calendar-weekday-grid-line")||t.target.className.includes("tui-full-calendar-time-date-schedule-block-wrap"))&&e.editing||(t.target.className.includes("tui-full-calendar-weekday-grid-line")||t.target.className.includes("tui-full-calendar-time-date-schedule-block-wrap"))&&e.editing&&e.creating?(e.editing=!1,e.creating=!1,e.selected=null,1===e.clickCount&&e.clickCount,2===e.clickCount&&e.clickCount):null===e.selected||"tui-full-calendar-weekday-schedule-title"===t.target.className||"tui-full-calendar-time-schedule-content tui-full-calendar-time-schedule-content-time"===t.target.className||e.editing?"tui-full-calendar-weekday-schedule-title"!==t.target.className&&"tui-full-calendar-time-schedule-content tui-full-calendar-time-schedule-content-time"!==t.target.className||(e.creating=!1,1===e.clickCount&&e.clickCount,2===e.clickCount&&e.clickCount):(e.selected=null,1===e.clickCount&&e.clickCount,2===e.clickCount&&e.clickCount)}));case 6:case"end":return t.stop()}}),t)})))()}}),ae=ne,ie=(n("781b"),Object(c["a"])(ae,K,V,!1,null,"a6647d84",null)),se=ie.exports,re={name:"Calendar",components:{agenda:se},data:function(){return{token:this.$store.getters.getToken,loading:!1,datastored:this.$store.state.user}}},oe=re,le=(n("a8c1"),Object(c["a"])(oe,H,F,!1,null,"3cccda48",null)),ce=le.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"columns is-multiline has-text-centered"},[e._m(0),"undefined"!=e.token?n("div",{staticClass:"column is-12"},[n("SchedulerKanban",{attrs:{API_KEY:e.token,ID_USER:e.idUser}})],1):e._e()])])},de=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column is-12"},[n("h1",{staticClass:"is-size-1"},[e._v("Kanban")])])}],fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main_kanban_daypilot"},[n("b-loading",{attrs:{"is-full-page":e.isFullPage,"can-cancel":!0},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),n("div",{staticClass:"column is-12"},[n("div",{staticClass:"columns multiline px-6 py-2"},[n("div",{staticClass:"column is-12-touch "},[n("div",{staticClass:"columns is-vcentered is-justify-content-flex-start is-left has-text-left is-desktop"},[n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"field is-horizontal"},[e._m(0),n("div",{staticClass:"control is-flex-grow-2"},[n("div",{staticClass:"dropdown is-block is-fullwidth",class:e.showingItems},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button is-fullwidth is-justify-content-space-between",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(t){return e.show("items",e.showingItems)}}},[n("span",{staticClass:"icon-text"},[n("span",[e._v(e._s(e.itemSelected.rubrique))])]),e._m(1)])]),n("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[n("div",{staticClass:"dropdown-content"},[e._l(e.itemsList,(function(t,a){return n("a",{key:a,staticClass:"dropdown-item",attrs:{value:t.rubrique},on:{click:function(n){return e.getItemColumns(t)}}},[n("span",{staticClass:"icon-text"},[n("span",[e._v(e._s(t.rubrique))])])])})),n("hr",{staticClass:"dropdown-divider"})],2)])])])])]),n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"field is-horizontal"},[e._m(2),n("div",{staticClass:"control is-flex-grow-2"},[n("div",{staticClass:"dropdown is-block is-fullwidth",class:e.showing},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button is-fullwidth is-justify-content-space-between",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(t){return e.show("users",e.showing)}}},[n("span",{staticClass:"icon-text"},[n("span",{staticClass:"icon"},[n("span",{staticClass:"fas fa-circle",style:{color:e.typeview.color}})]),n("span",[e._v(e._s(e.typeview.title))])]),e._m(3)])]),n("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[n("div",{staticClass:"dropdown-content"},[e._l(e.arrayFilter,(function(t,a){return n("a",{key:a,staticClass:"dropdown-item",attrs:{value:t.title},on:{click:function(n){return e.setView(t)}}},[n("span",{staticClass:"icon-text is-flex is-flex-wrap-nowrap"},[n("span",{staticClass:"icon",style:{color:t.color}},[n("span",{staticClass:"fas fa-circle"})]),n("span",[e._v(e._s(t.title))])])])})),n("hr",{staticClass:"dropdown-divider"})],2)])])])])]),n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"field is-horizontal"},[e._m(4),n("div",{staticClass:"control is-flex-grow-2"},[n("div",{staticClass:"select is-block"},[n("Multiselect",{attrs:{options:e.allUsers,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Selectionnez",label:"name","track-by":"name","preselect-first":!0},on:{close:e.onFilter},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,i=t.isOpen;return[a.length&&!i?n("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(a.length)+" selections ")]):e._e()]}}]),model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1)])])])])])])]),n("DayPilotKanban",{ref:"kanban",attrs:{id:"dp",config:e.config}})],1)},pe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label is-flex-tablet-only is-justify-content-space-between pt-2"},[e._v(" Rubrique "),n("span",{staticClass:"is-hidden-desktop"},[e._v(" ")]),e._v(" :   ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("span",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label is-flex-tablet-only is-justify-content-space-between pt-2"},[e._v(" Affichage "),n("span",{staticClass:"is-hidden-desktop"},[e._v(" ")]),e._v(" :   ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("span",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label is-flex-tablet-only is-justify-content-space-between pt-2"},[e._v(" Utilisateur "),n("span",{staticClass:"is-hidden-desktop"},[e._v(" ")]),e._v(" :   ")])}],he=n("3835"),me=(n("4e82"),n("4fad"),n("0d32")),ge={name:"SchedulerKanban",props:{API_KEY:{type:String,default:function(){return""}},ID_USER:{type:String,default:function(){return 1}},URI:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/interactions/"}},URI_ACTION:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/interaction/"}},URI_ITEMS:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/actionrubriques/"}},URI_ACTIONTYPES:{type:String,default:function(){return"https://0002-zebridge-dev-externe.api.crm-simple.com/actiontypes/"}},idUtilisateurs:{type:Array,default:function(){return["1","2","3","4","5","6","7","8","9"]}}},data:function(){var e=this;return{isFullPage:!1,isLoading:!0,itemSelected:{},user:[],lock:"alllock",type:"alltype",priority:"allpriority",steps:[],allUsers:[],tasks:[],showing:"",showingItems:"",typeview:{title:"Selectionnez",color:"#2251ff",index:"color_defaut"},itemsList:[],columnList:[],arrayFilter:[{color:"#2251ff",title:"Défaut",index:"color_defaut"},{color:"#F54D40",title:"Etat",index:"color_etat"},{color:"#25ffcd",title:"Priorité",index:"color_priorite"},{color:"#de452a",title:"Utilisateur",index:"color_utilisateur"},{color:"#cdee00",title:"Type",index:"color_type"},{color:"#e19400",title:"Priorité échéance",index:"color_priorite_echeance"}],config:{columnWidthSpec:"Auto",swimlaneMoveHandling:"Disabled",cardDeleteHandling:"Disabled",cardMoveHandling:"Enabled",onCardMoved:function(t){console.log("args",t),e.updateCalendar(t.card.data,t.card.control.cards)},onBeforeCellRender:function(t){t.cell.swimlane.data.id===e.ID_USER&&(t.cell.areas=[{right:5,bottom:5,width:100,height:30,html:"Ajouter",cssClass:"add-button",action:"JavaScript",js:function(){var t=Object(W["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("ON BUTTON ",n),e.createNewTasks(n,"add-button");case 2:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}])},cardRightClickHandling:"Disabled",onCardClick:function(){var t=Object(W["a"])(regeneratorRuntime.mark((function t(n){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("CARDS : ",n),"1"===n.card.data.lock||n.card.data.swimlane!==e.ID_USER){t.next=10;break}return t.next=4,me["DayPilot"].Modal.prompt("Modifier le titre de la tâche: ",n.card.data.text);case 4:if(a=t.sent,i=a.result,i){t.next=8;break}return t.abrupt("return");case 8:n.card.data.text=a.result,e.updateCalendar(n.card.data,n.card.control.cards);case 10:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}}},components:{DayPilotKanban:me["DayPilotKanban"],Multiselect:te.a},computed:{kanban:function(){return this.$refs.kanban.control}},methods:{getAllUsers:function(){var e=arguments,t=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:0,i=t,n.abrupt("return",T()({method:"get",url:"https://0002-zebridge-dev-externe.api.crm-simple.com/utilisateurs/"+t.API_KEY,headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data.data;console.log("USERS : ",e),t.forEach((function(e){i.allUsers.push({name:e.nom_utilisateur.value,id:e.idutilisateur.value})})),i.user=i.allUsers.filter((function(e){return e.id in i.idUtilisateurs})),a++,a>=e.data.nbpage&&this.getAllUsers(a)})).catch((function(e){return console.log("Error ON GET ALL USERS: ",e),[]})));case 3:case"end":return n.stop()}}),n)})))()},compare:function(e,t){return e.rubrique<t.rubrique?-1:e.rubrique>t.rubrique?1:0},getItemsList:function(){var e=arguments,t=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:0,n.abrupt("return",T()({method:"get",url:t.URI_ITEMS+t.API_KEY,headers:{"Content-Type":"application/json"}}).then((function(e){var n=e.data.data;n.forEach((function(e){t.itemsList.push({id:e.idrubrique,rubrique:e.rubrique})})),a++,a<e.data.nbpage?t.getItemsList(a):(t.itemsList.sort(t.compare),t.getItemColumns(t.itemsList[0]))})).catch((function(e){return console.log("Error ON GET ALL ITEMS: ",e),[]})));case 2:case"end":return n.stop()}}),n)})))()},getItemColumns:function(e){var t=arguments,n=this;return Object(W["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:0,n.isLoading=!0,n.itemSelected=e,n.columnList=[],s=e.id,console.log("Id :",s),a.abrupt("return",T()({method:"get",url:n.URI_ACTIONTYPES+n.API_KEY+"/condition:idrubrique:egal:"+s,headers:{"Content-Type":"application/json"}}).then((function(t){var a=t.data.data;console.log("RESPONSE COLUMN A : ",t),a.forEach((function(e){n.columnList.push({id:e.idaction_type,name:e.action_type})})),i++,console.log("COLUMN LIST",n.columnList),i>=t.data.nbpage?n.showingItems="":n.getItemColumns(e,i),n.isLoading=!1,n.columnList=n.addCreateButton(n.columnList),n.kanban.columns.list=n.columnList,_["default"].set(n.config,"columns",n.columnList),n.loadSwimlane(),n.loadCards()})).catch((function(e){return console.log("Error ON GET ALL ACTIONS TYPE: ",e),[]})));case 7:case"end":return a.stop()}}),a)})))()},getKanbanItem:function(){var e=arguments,t=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){var a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:t.URI+t.API_KEY,i=e.length>1&&void 0!==e[1]?e[1]:0,s=t,s.tasks=0===i?[]:s.tasks,console.log("nombre_page ",i),n.abrupt("return",T()({method:"get",url:a+"/"+i,headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data.data;console.log("TASK 1.0 ",e);for(var n=s.tasks.length+1,a=function(e){return e.reduce((function(e,t){return(e[t.idutilisateur.value]=e[t.idutilisateur.value]||[]).push(t),e}),{})},r=a(t),o=[],l=0,c=Object.entries(r);l<c.length;l++){var u=Object(he["a"])(c[l],1),d=u[0];o.push({id:"".concat(d),tasks:r["".concat(d)]})}o.forEach((function(e){e.tasks.forEach((function(t){s.tasks.push({idaction:t.idaction.value,id:n,name:"",text:t.sujet.value,swimlane:e.id,start:t.date_action.value,end:t.date_fin.value,column:t.idtype_action.value,lock:t.e_lock.value,barColor:s.setColor(s.typeview,t),priority:t.priorite.value,areas:[{right:0,top:6,width:20,height:20,icon:"fas fa-info-circle",style:"text-align:center; color:#2251ff",action:"Bubble",bubble:new me["DayPilot"].Bubble({onLoad:function(e){var t=e.source.data.card.idaction,n="",a="";n=e.source.data.card.start,n=n.split(" ");var i=n[0].split("-");n[0]=i[2]+"-"+i[1]+"-"+i[0];var s=n[1].split(":");n[1]=s[0]+":"+s[1],a=e.source.data.card.end,a=a.split(" "),i=a[0].split("-"),a[0]=i[2]+"-"+i[1]+"-"+i[0],s=a[1].split(":"),a[1]=s[0]+":"+s[1],e.html="<span style='font-weight: 900'>"+e.source.data.card.text+"</span></br>Début: "+n[0]+" à "+n[1]+"</br>Fin: "+a[0]+" à "+a[1]+"</br><a href='https://0002-zebridge-dev-externe.crm-simple.com/action_edit.php?idaction="+t+"'target='_blank'rel='noopener' >Voir plus</a>"}})}]}),n++}))})),console.log("TASKS 2.0 : ",s.tasks),i++,i<e.data.nbpage&&s.getKanbanItem(s.URI+s.API_KEY,i)})).catch((function(e){return console.log("Error ON GET: ",e),[]})));case 6:case"end":return n.stop()}}),n)})))()},loadCards:function(){_["default"].set(this.config,"cards",this.tasks)},loadColumns:function(){this.columnList=this.addCreateButton(this.columnList),_["default"].set(this.config,"columns",this.columnList)},createNewTasks:function(e,t){var n=this;return Object(W["a"])(regeneratorRuntime.mark((function a(){var i,s,r,o,l,c,u,d,f,p,h,m,g,b;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("RUN THROUGH",t),console.log("args COLUMN :",e),a.next=4,me["DayPilot"].Modal.prompt("Créer une nouvelle tâche: ");case 4:if(i=a.sent,s=i.result,s){a.next=8;break}return a.abrupt("return");case 8:r=function(e){return e<10?"0"+e:e},o=new Date,l=o.getFullYear()+"-"+r(o.getMonth()+1)+"-"+r(o.getDate()),c=l+" 00:00:00",u=new Date(c),d=new Date(l+" 23:59:59"),f=d.getTime()-u.getTime(),p=Math.floor(f/36e5),h=f%36e5,m=Math.floor(h/6e4),g=JSON.stringify({sujet:s,date_action:c,color:"#9e5fff",duree_heures:p,duree_minutes:m,idutilisateur:n.ID_USER,idtype_action:"column"===t?e.data.id:e.column.data.id,e_lock:"alllock"===n.lock?"0":n.lock,priorite:"allpriority"===n.priority?"0":n.priority}),b={method:"post",url:n.URI_ACTION+n.API_KEY,headers:{"Content-Type":"application/json"},data:g},T()(b).then((function(){n.onFilter()})).catch((function(e){console.log("Error ON POST: ",e)}));case 21:case"end":return a.stop()}}),a)})))()},addCreateButton:function(e){var t=this;return e.forEach((function(e){e.areas=[{right:0,top:0,bottom:0,width:18,html:"+",cssClass:"add-button",action:"JavaScript",js:function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.createNewTasks(n,"column");case 1:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()}]})),e},loadSwimlane:function(){_["default"].set(this.config,"swimlanes",this.allUsers)},show:function(e,t){var n=0===t.length?"is-active":"";"users"===e?this.showing=n:this.showingItems=n},setView:function(e){this.typeview=e,this.show("users",this.showing),this.isLoading=!0,this.onFilter()},setColor:function(e,t){var n=e.color;try{var a=t.color.value;n=JSON.parse(a)[e.index]}catch(i){console.log("undefined color data")}return n},getQueryParam:function(){var e="";return this.user.length>0&&(e=e.concat(0===e.length?"condition:":":separator:AND:condition:",this.setfilter(this.user.map((function(e){return e.id})),"idutilisateur"))),console.log("UTILISATEUR / ",this.filter),"alllock"!==this.lock&&(e=e.concat(0===e.length?"condition:":":separator:AND:condition:",this.setfilter(this.lock,"e_lock"))),console.log("LOCK / ",this.filter),"allpriority"!==this.priority&&(e=e.concat(0===e.length?"condition:":":separator:AND:condition:",this.setfilter(this.priority,"priorite"))),console.log("PRIO / ",this.filter),e},setfilter:function(e,t){return 1===e.length?t+":egal:"+e[0]:t+":egal:"+e[0]+":OR:"+this.setfilter(e.slice(1),t)},onFilter:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.URI+e.API_KEY,n+="/"+e.getQueryParam(),console.log("FILTER URL IS : ",n),e.isLoading=!0,e.getKanbanItem(n).then((function(){_["default"].set(e.config,"swimlanes",e.allUsers.filter((function(t){return e.user.includes(t)}))),e.loadColumns(),e.loadCards(),e.isLoading=!1}));case 5:case"end":return t.stop()}}),t)})))()},updateCalendar:function(e,t){var n=this;return Object(W["a"])(regeneratorRuntime.mark((function a(){var i,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=JSON.stringify({idaction:e.idaction,sujet:e.text,e_lock:e.lock,idtype_action:e.column,idutilisateur:e.swimlane,color:""===e.barColor?"#9e5fff":e.barColor}),s=n,r={method:"put",url:n.URI_ACTION+n.API_KEY,headers:{"Content-Type":"application/json"},data:i},a.abrupt("return",T()(r).then((function(){console.log("AllEvents : ",t),console.log("events : ",e),t.update(e),s.onFilter()})).catch((function(e){console.log("UPDATE API DATAS ERROR : ",e)})));case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){var e=this;this.getAllUsers().then((function(){e.getKanbanItem().then((function(){e.loadSwimlane(),e.loadColumns(),e.loadCards(),e.getItemsList(),e.isLoading=!1,e.kanban.cellMarginBottom=40}))}))}},be=ge,ve=(n("6828"),Object(c["a"])(be,fe,pe,!1,null,null,null)),Ce=ve.exports,ye={components:{SchedulerKanban:Ce},data:function(){return{token:this.$store.getters.getToken,idUser:this.$store.getters.getIdUser,loading:!1,datastored:this.$store.state.user}}},we=ye,ke=Object(c["a"])(we,ue,de,!1,null,null,null),_e=ke.exports,xe=n("2f62");_["default"].use(xe["a"]);var je=new xe["a"].Store({state:{user:{isAuth:!1,token:"undefined",idUser:"undefined"}},getters:{isConnected:function(e){return e.user.isAuth},getToken:function(e){return e.user.token},getIdUser:function(e){return e.user.idUser}},mutations:{updateAuth:function(e,t){e.user.isAuth=t},updateToken:function(e,t){e.user.token=t},updateIdUser:function(e,t){e.user.idUser=t}},actions:{}});_["default"].use(L["a"]);var Se=[{path:"/",name:"Home",component:B},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/schedule",name:"Agenda",component:ce},{path:"/gantt",name:"Gantt",component:function(){return n.e("chunk-6b2cb756").then(n.bind(null,"8a4a"))}},{path:"/planning",name:"Planning",component:function(){return n.e("chunk-22013fc8").then(n.bind(null,"6859"))}},{path:"/kanban",name:"Planning Kanban",component:_e}],De=new L["a"]({mode:"history",base:"/",routes:Se});De.beforeEach((function(e,t,n){var a=je.getters.isConnected;"Home"===e.name||a?n():n({name:"Home"})}));var Te=De;_["default"].config.productionTip=!1,_["default"].use(x["a"],T.a),_["default"].use(k["a"]),_["default"].use(S.a),new _["default"]({router:Te,store:je,render:function(e){return e(w)}}).$mount("#app")},6828:function(e,t,n){"use strict";n("bc91")},"76d2":function(e,t,n){"use strict";n("e493")},"781b":function(e,t,n){"use strict";n("13a2")},8443:function(e,t,n){e.exports=n.p+"img/logo_simple.2bbd2a1e.png"},a8c1:function(e,t,n){"use strict";n("c775")},b085:function(e,t,n){},bc91:function(e,t,n){},c775:function(e,t,n){},c8dd:function(e,t,n){},d708:function(e,t,n){},e493:function(e,t,n){}});
//# sourceMappingURL=app.78b88a31.js.map