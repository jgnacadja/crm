{"remainingRequest":"/home/jr/devspace/ModuleSimpleCRM/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jr/devspace/ModuleSimpleCRM/src/components/gantt.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jr/devspace/ModuleSimpleCRM/src/components/gantt.vue","mtime":1643813775652},{"path":"/home/jr/devspace/ModuleSimpleCRM/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1643224169106},{"path":"/home/jr/devspace/ModuleSimpleCRM/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1643224169006},{"path":"/home/jr/devspace/ModuleSimpleCRM/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1643224169106},{"path":"/home/jr/devspace/ModuleSimpleCRM/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1643224172087}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IERheVBpbG90LCBEYXlQaWxvdEdhbnR0IH0gZnJvbSAiZGF5cGlsb3QtcHJvLXZ1ZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IE11bHRpc2VsZWN0IGZyb20gInZ1ZS1tdWx0aXNlbGVjdCI7CmltcG9ydCAidnVlLW11bHRpc2VsZWN0L2Rpc3QvdnVlLW11bHRpc2VsZWN0Lm1pbi5jc3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJHYW50dCIsCiAgcHJvcHM6IHsKICAgIEFQSV9LRVk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfSwKICAgIH0sCgogICAgVVJJOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gImh0dHBzOi8vMDAwMi16ZWJyaWRnZS1kZXYtZXh0ZXJuZS5hcGkuY3JtLXNpbXBsZS5jb20vaW50ZXJhY3Rpb25zLyI7CiAgICAgIH0sCiAgICB9LAoKICAgIFVSSV9BQ1RJT046IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAiaHR0cHM6Ly8wMDAyLXplYnJpZGdlLWRldi1leHRlcm5lLmFwaS5jcm0tc2ltcGxlLmNvbS9pbnRlcmFjdGlvbi8iOwogICAgICB9LAogICAgfSwKCiAgICBkYXRhTGlzdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICB9LAoKICAgIFVTRVJfQVBJOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gImh0dHBzOi8vMDAwMi16ZWJyaWRnZS1kZXYtZXh0ZXJuZS5hcGkuY3JtLXNpbXBsZS5jb20vdXRpbGlzYXRldXJzLyI7CiAgICAgIH0sCiAgICB9LAogICAgYXJyYXlGaWx0ZXI6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgIHsKICAgICAgICAgICAgY29sb3I6ICIjMjI1MWZmIiwKICAgICAgICAgICAgdGl0bGU6ICJEw6lmYXV0IiwKICAgICAgICAgICAgaW5kZXg6ICJjb2xvcl9kZWZhdXQiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29sb3I6ICIjZmZjZWRmMCIsCiAgICAgICAgICAgIHRpdGxlOiAiRXRhdCIsCiAgICAgICAgICAgIGluZGV4OiAiY29sb3JfZXRhdCIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBjb2xvcjogIiMyNWZmY2QiLAogICAgICAgICAgICB0aXRsZTogIlByaW9yaXTDqSIsCiAgICAgICAgICAgIGluZGV4OiAiY29sb3JfcHJpb3JpdGUiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29sb3I6ICIjZGU0NTJhIiwKICAgICAgICAgICAgdGl0bGU6ICJVdGlsaXNhdGV1ciIsCiAgICAgICAgICAgIGluZGV4OiAiY29sb3JfdXRpbGlzYXRldXIiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29sb3I6ICIjY2RlZTAwIiwKICAgICAgICAgICAgdGl0bGU6ICJUeXBlIiwKICAgICAgICAgICAgaW5kZXg6ICJjb2xvcl90eXBlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbG9yOiAiI2UxOTQwMCIsCiAgICAgICAgICAgIHRpdGxlOiAiUHJpb3JpdMOpIMOpY2jDqWFuY2UiLAogICAgICAgICAgICBpbmRleDogImNvbG9yX3ByaW9yaXRlX2VjaGVhbmNlIiwKICAgICAgICAgIH0sCiAgICAgICAgXTsKICAgICAgfSwKICAgIH0sCiAgICBpZFV0aWxpc2F0ZXVyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gWyIxIiwgIjIiLCAiMyIsICI0IiwgIjUiLCAiNiIsICI3IiwgIjgiLCAiOSJdOwogICAgICB9LAogICAgfSwKICAgIGlkcHJvamV0czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICB9LAogICAgaWRjb250YWN0czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICB9LAogICAgaWRzb2NpZXRlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICB9LAoKICAgIG1vbnRoczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgIkphbnZpZXIiLAogICAgICAgICAgIkbDqXZyaWVyIiwKICAgICAgICAgICJNYXJzIiwKICAgICAgICAgICJBdnJpbCIsCiAgICAgICAgICAiTWFpIiwKICAgICAgICAgICJKdWluIiwKICAgICAgICAgICJKdWlsbGV0IiwKICAgICAgICAgICJBb8O7dCIsCiAgICAgICAgICAiU2VwdGVtYnJlIiwKICAgICAgICAgICJPY3RvYnJlIiwKICAgICAgICAgICJOb3ZlbWJyZSIsCiAgICAgICAgICAiRMOpY2VtYnJlIiwKICAgICAgICBdOwogICAgICB9LAogICAgfSwKCiAgICBtb250aF9zZWxlY3RlZF9udW1iZXI6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldE1vbnRoKCk7CiAgICAgIH0sCiAgICB9LAoKICAgIG1vbnRoX3NlbGVjdGVkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5tb250aHNbdGhpcy5tb250aF9zZWxlY3RlZF9udW1iZXJdOwogICAgICB9LAogICAgfSwKCiAgICB5ZWFyX3NlbGVjdGVkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgICB9LAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0Z1bGxQYWdlOiBmYWxzZSwKICAgICAgaXNMb2FkaW5nOiB0cnVlLAogICAgICBzdGFydERhdGU6ICIiLAogICAgICBlbmREYXRlOiAiIiwKICAgICAgY29uZmlnOiB7CiAgICAgICAgY2VsbFdpZHRoU3BlYzogIkZpeGVkIiwKICAgICAgICBjZWxsV2lkdGg6IDQwLAogICAgICAgIHRpbWVIZWFkZXJzOiBbCiAgICAgICAgICB7IGdyb3VwQnk6ICJNb250aCIsIGZvcm1hdDogIk1NTU0geXl5eSIgfSwKICAgICAgICAgIHsgZ3JvdXBCeTogIldlZWsiIH0sCiAgICAgICAgICB7IGdyb3VwQnk6ICJEYXkiLCBmb3JtYXQ6ICJkIiB9LAogICAgICAgIF0sCiAgICAgICAgc2NhbGU6ICJEYXkiLAogICAgICAgIGRheXM6IERheVBpbG90LkRhdGUudG9kYXkoKS5kYXlzSW5ZZWFyKCksCiAgICAgICAgc3RhcnREYXRlOiBEYXlQaWxvdC5EYXRlLnRvZGF5KCkuZmlyc3REYXlPZk1vbnRoKCksCiAgICAgICAgcm93SGVhZGVySGlkZUljb25FbmFibGVkOiBmYWxzZSwKICAgICAgICBldmVudHM6IG51bGwsCiAgICAgICAgcm93OiB7CiAgICAgICAgICBidWJibGVIdG1sOiAiUm93IGJ1YmJsZSIsCiAgICAgICAgfSwKICAgICAgICBjb2x1bW5zOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHRpdGxlOiAiTGlzdGUgZGVzIHTDomNoZXMiLAogICAgICAgICAgICB3aWR0aDogNTAsCiAgICAgICAgICAgIHByb3BlcnR5OiAidGV4dCIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgbG9jYWxlOiAiZnItZnIiLAogICAgICAgIHJvd01vdmVIYW5kbGluZzogIkRpc2FibGVkIiwKICAgICAgICBvblJvd01vdmVkOiAoYXJncykgPT4gewogICAgICAgICAgdmFyIGRhdGEgPSB7fTsKCiAgICAgICAgICB2YXIgY29uZmlnID0gewogICAgICAgICAgICBtZXRob2Q6ICJwdXQiLAogICAgICAgICAgICB1cmw6IHRoaXMuVVJJX0FDVElPTiArIHRoaXMuQVBJX0tFWSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKGFyZ3MucG9zaXRpb24gPT09ICJjaGlsZCIpIHsKICAgICAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICBpZGFjdGlvbjogYXJncy5rZi5kYXRhLnRhc2suaWQsCiAgICAgICAgICAgICAgaWRhY3Rpb25fcGFyZW50OiBhcmdzLmxmLmRhdGEudGFzay5pZCwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjb25maWcuZGF0YSA9IGRhdGE7CiAgICAgICAgICAgIGF4aW9zKGNvbmZpZykudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5nYW50dC50YXNrcy51cGRhdGUoYXJncy5lKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIGlkYWN0aW9uOiBhcmdzLmtmLmRhdGEudGFzay5pZCwKICAgICAgICAgICAgICBpZGFjdGlvbl9wYXJlbnQ6IG51bGwsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uZmlnLmRhdGEgPSBkYXRhOwogICAgICAgICAgICBheGlvcyhjb25maWcpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZ2FudHQudGFza3MudXBkYXRlKGFyZ3MuZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdGFza01vdmVIYW5kbGluZzogIlVwZGF0ZSIsCiAgICAgICAgb25UYXNrUmVzaXplZDogKGFyZ3MpID0+IHsKICAgICAgICAgIHRoaXMudXBkYXRlVGFzayhhcmdzKTsKICAgICAgICB9LAogICAgICAgIG9uVGFza01vdmVkOiAoYXJncykgPT4gewogICAgICAgICAgdGhpcy51cGRhdGVUYXNrKGFyZ3MpOwogICAgICAgIH0sCiAgICAgICAgbGlua0NyZWF0ZUhhbmRsaW5nOiAiVXBkYXRlIiwKICAgICAgICBvbkxpbmtDcmVhdGVkOiAoYXJncykgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIm9uTGlua0NyZWF0ZWQiLCBhcmdzKTsKCiAgICAgICAgICB2YXIgZGF0YSA9IHt9OwoKICAgICAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgICAgIG1ldGhvZDogInB1dCIsCiAgICAgICAgICAgIHVybDogdGhpcy5VUklfQUNUSU9OICsgdGhpcy5BUElfS0VZLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgIH07CgogICAgICAgICAgbGV0IHRvX1N0YXJ0X2RhdGUgPSBhcmdzLnRhcmdldC5zdGFydCgpLnZhbHVlOwogICAgICAgICAgbGV0IGZyb21fc3RhcnRfZGF0ZSA9IGFyZ3Muc291cmNlLnN0YXJ0KCkudmFsdWU7CgogICAgICAgICAgY29uZmlnLmRhdGEgPSBkYXRhOwogICAgICAgICAgaWYgKG1vbWVudCh0b19TdGFydF9kYXRlKS5pc1NhbWVPckFmdGVyKGZyb21fc3RhcnRfZGF0ZSkpIHsKICAgICAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICBpZGFjdGlvbjogYXJncy50bywKICAgICAgICAgICAgICBpZGFjdGlvbl9wYXJlbnQ6IGFyZ3MuZnJvbSwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBheGlvcyhjb25maWcpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZ2FudHQudGFza3MudXBkYXRlKGFyZ3MuZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdW5saW5rCiAgICAgICAgICAgIGxldCBmaW5kTGluayA9IHRoaXMuZ2FudHQubGlua3MuZmluZEJ5RnJvbVRvKGFyZ3MuZnJvbSwgYXJncy50byk7CiAgICAgICAgICAgIGlmIChmaW5kTGluaykgdGhpcy5nYW50dC5saW5rcy5yZW1vdmUoZmluZExpbmspOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcm93Q3JlYXRlSGFuZGxpbmc6ICJFbmFibGVkIiwKICAgICAgICBvblJvd0NyZWF0ZTogKGFyZ3MpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJvblJvd0NyZWF0ZSIsIGFyZ3MpOwogICAgICAgICAgdmFyIGVmID0gdGhpczsKICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAvL2Zvcm1hdCBkYXRlIHRvIFlZWVktTU0tZGQgaGg6bW06c3MKICAgICAgICAgIHZhciBkYXRlID0KICAgICAgICAgICAgdG9kYXkuZ2V0RnVsbFllYXIoKSArCiAgICAgICAgICAgICItIiArCiAgICAgICAgICAgICh0b2RheS5nZXRNb250aCgpICsgMSkgKwogICAgICAgICAgICAiLSIgKwogICAgICAgICAgICB0b2RheS5nZXREYXRlKCkgKwogICAgICAgICAgICAiICIgKwogICAgICAgICAgICB0b2RheS5nZXRIb3VycygpICsKICAgICAgICAgICAgIjoiICsKICAgICAgICAgICAgdG9kYXkuZ2V0TWludXRlcygpICsKICAgICAgICAgICAgIjoiICsKICAgICAgICAgICAgdG9kYXkuZ2V0U2Vjb25kcygpOwoKICAgICAgICAgIC8vIGZvcm1hdCBkYXRlIGZyb20gMjAyMi0xLTEgdG8gMjAyMi0wMS0wMSB3aXRoIG1vbWVudAogICAgICAgICAgZGF0ZSA9IG1vbWVudChkYXRlKS5mb3JtYXQoIllZWVktTU0tREQgSEg6bW06c3MiKTsKCiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgc3VqZXQ6IGFyZ3MudGV4dCwKICAgICAgICAgICAgZGF0ZV9hY3Rpb246IGRhdGUsCiAgICAgICAgICAgIGNvbG9yOiAiIzllNWZmZiIsCiAgICAgICAgICAgIGR1cmVlX2hldXJlczogIjI0IiwKICAgICAgICAgICAgZHVyZWVfbWludXRlczogIjAwIiwKICAgICAgICAgIH0pOwoKICAgICAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICB1cmw6IHRoaXMuVVJJX0FDVElPTiArIHRoaXMuQVBJX0tFWSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICB9OwogICAgICAgICAgYXhpb3MoY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBlZi5nYW50dC50YXNrcy5hZGQoewogICAgICAgICAgICAgIGlkOiBEYXlQaWxvdC5ndWlkKCksCiAgICAgICAgICAgICAgdGV4dDogYXJncy50ZXh0LAogICAgICAgICAgICAgIHN0YXJ0OiBuZXcgRGF5UGlsb3QuRGF0ZSgpLmdldERhdGVQYXJ0KCksCiAgICAgICAgICAgICAgZW5kOiBuZXcgRGF5UGlsb3QuRGF0ZSgpLmdldERhdGVQYXJ0KCkuYWRkRGF5cygxKSwKICAgICAgICAgICAgICBpZGFjdGlvbjogcmVzcG9uc2UuZGF0YS5pZGFjdGlvbiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICB9LAogICAgICBsb2NhbGU6ICJmci1GUiIsCiAgICAgIGN1cnJlbnRZZWFyOiAiIiwKICAgICAgZ2FudHQ6IG51bGwsCiAgICAgIHVzZXJzOiBbXSwKICAgICAgc2VsZWN0ZWRVc2VyczogW10sCiAgICAgIENzY2hlZHVsZUxpc3Q6IFtdLAogICAgICBzaG93aW5nOiAiIiwKICAgICAgdHlwZXZpZXc6IHsKICAgICAgICB0aXRsZTogIlNlbGVjdGlvbm5leiIsCiAgICAgICAgY29sb3I6ICIjMjI1MWZmIiwKICAgICAgICBpbmRleDogImNvbG9yX2RlZmF1dCIsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgRGF5UGlsb3RHYW50dCwKICAgIE11bHRpc2VsZWN0LAogIH0sCiAgbWV0aG9kczogewogICAgc2hvdygpIHsKICAgICAgdGhpcy5zaG93aW5nID0gdGhpcy5zaG93aW5nLmxlbmd0aCA9PT0gMCA/ICJpcy1hY3RpdmUiIDogIiI7CiAgICB9LAoKICAgIHNldFZpZXcodHlwZSkgewogICAgICB0aGlzLnR5cGV2aWV3ID0gdHlwZTsKICAgICAgdGhpcy5zaG93KCk7CiAgICAgIHRoaXMuZGlzcGF0Y2hBY3Rpb24oKTsKICAgIH0sCiAgICBzZXRDb2xvcih0eXBlLCBkYXRhKSB7CiAgICAgIGxldCBjb2xvciA9IHR5cGUuY29sb3I7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QganNvbmRhdGEgPSBkYXRhLmNvbG9yLnZhbHVlOwogICAgICAgIGNvbG9yID0gSlNPTi5wYXJzZShqc29uZGF0YSlbdHlwZS5pbmRleF07CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coInVuZGVmaW5lZCBjb2xvciBkYXRhIik7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb2xvcjsKICAgIH0sCiAgICBpc1VzZXJTZWxlY3RlZChpZFVzZXIpIHsKICAgICAgcmV0dXJuIHRoaXMuaWRVdGlsaXNhdGV1cnMuZmluZChpZFVzZXIpID4gMDsKICAgIH0sCiAgICBhc3luYyBsb2FkVXNlcnMoKSB7CiAgICAgIGF3YWl0IGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHVybDogdGhpcy5VU0VSX0FQSSArIHRoaXMuQVBJX0tFWSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZXN1bHQgPT09IDEpIHsKICAgICAgICAgICAgdGhpcy51c2VycyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5tYXAoKGVsKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGlkOiBlbC5pZHV0aWxpc2F0ZXVyLnZhbHVlLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICBuYW1lOiBlbC5ub21fdXRpbGlzYXRldXIudmFsdWUudG9TdHJpbmcoKSwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzID0gdGhpcy51c2Vycy5maWx0ZXIoCiAgICAgICAgICAgICAgKHgpID0+IHguaWQgaW4gdGhpcy5pZFV0aWxpc2F0ZXVycwogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5lcnJfbWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZW5lcmF0ZVF1ZXJ5Rm9yKGRhdGFBcnJheSwgZGF0YVBhcmFtLCByZXN1bHQpIHsKICAgICAgaWYgKGRhdGFBcnJheS5sZW5ndGggPiAwKSB7CiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdCgKICAgICAgICAgIHJlc3VsdC5sZW5ndGggPT09IDAgPyAiY29uZGl0aW9uOiIgOiAiOnNlcGFyYXRvcjpBTkQ6Y29uZGl0aW9uOiIsCiAgICAgICAgICB0aGlzLnNldGZpbHRlcihkYXRhQXJyYXksIGRhdGFQYXJhbSkKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgc2V0UmVuZGVyUmFuZ2VUZXh0KCkgewogICAgICBsZXQgaW5kZXggPSAodGhpcy5tb250aHMuaW5kZXhPZih0aGlzLm1vbnRoX3NlbGVjdGVkKSArIDEpLnRvTG9jYWxlU3RyaW5nKAogICAgICAgICJlbi1VUyIsCiAgICAgICAgeyBtaW5pbXVtSW50ZWdlckRpZ2l0czogMiwgdXNlR3JvdXBpbmc6IGZhbHNlIH0KICAgICAgKTsKCiAgICAgIHRoaXMuc3RhcnREYXRlID0gdGhpcy55ZWFyX3NlbGVjdGVkICsgIi0iICsgaW5kZXggKyAiLTAxIjsKCiAgICAgIHRoaXMuZW5kRGF0ZSA9IHRoaXMueWVhcl9zZWxlY3RlZCArICItIiArIGluZGV4ICsgIi0zMSI7CiAgICB9LAogICAgZ2V0UXVlcnlQYXJhbSgpIHsKICAgICAgLyoqCiAgICAgICAqQHBhcmFtIG5vbmUKICAgICAgICpAYXV0aG9yIEphY3F1ZXMKICAgICAgICpAUmVzdW1lIDogZmlndXJlIG91dCAgZmlsdGVyIG9uIEFQSSByZXF1ZXN0CiAgICAgICAqQGV4YW1wbGUgOiBjb25kaXRpb246aWR1dGlsaXNhdGV1cjplZ2FsOjE6T1I6aWR1dGlsaXNhdGV1cjplZ2FsOjQ6c2VwYXJhdG9yOkFORDpjb25kaXRpb246aWRwcm9qZXQ6ZWdhbDoxOk9SOmlkcHJvamV0OmVnYWw6NDA2MDpzZXBhcmF0b3I6QU5EOmNvbmRpdGlvbjppZHNvY2lldGU6ZWdhbDo0Ok9SOmlkc29jaWV0ZTplZ2FsOjIyMzQKICAgICAgICoqLwoKICAgICAgbGV0IGZpbHRlciA9ICIiOwogICAgICAvLyBmaWx0ZXJpbmcgdXNlcnMKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRVc2Vycy5sZW5ndGggPiAwKSB7CiAgICAgICAgZmlsdGVyID0gZmlsdGVyLmNvbmNhdCgKICAgICAgICAgIGZpbHRlci5sZW5ndGggPT09IDAgPyAiY29uZGl0aW9uOiIgOiAiOnNlcGFyYXRvcjpBTkQ6Y29uZGl0aW9uOiIsCiAgICAgICAgICB0aGlzLnNldGZpbHRlcigKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLm1hcCgoZSkgPT4gewogICAgICAgICAgICAgIHJldHVybiBlLmlkOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgImlkdXRpbGlzYXRldXIiCiAgICAgICAgICApCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgLy8gaWRwcm9qZXQKICAgICAgaWYgKHRoaXMuaWRwcm9qZXRzLmxlbmd0aCA+IDApIHsKICAgICAgICBmaWx0ZXIgPSBmaWx0ZXIuY29uY2F0KAogICAgICAgICAgZmlsdGVyLmxlbmd0aCA9PT0gMCA/ICJjb25kaXRpb246IiA6ICI6c2VwYXJhdG9yOkFORDpjb25kaXRpb246IiwKICAgICAgICAgIHRoaXMuc2V0ZmlsdGVyKHRoaXMuaWRwcm9qZXRzLCAiaWRwcm9qZXQiKQogICAgICAgICk7CiAgICAgIH0KCiAgICAgIC8vIGlkY29udGFjdAogICAgICBpZiAodGhpcy5pZGNvbnRhY3RzLmxlbmd0aCA+IDApIHsKICAgICAgICBmaWx0ZXIgPSBmaWx0ZXIuY29uY2F0KAogICAgICAgICAgZmlsdGVyLmxlbmd0aCA9PT0gMCA/ICJjb25kaXRpb246IiA6ICI6c2VwYXJhdG9yOkFORDpjb25kaXRpb246IiwKICAgICAgICAgIHRoaXMuc2V0ZmlsdGVyKHRoaXMuaWRjb250YWN0cywgImlkY29udGFjdCIpCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgLy8gaWRzb2NpZXRlCiAgICAgIGlmICh0aGlzLmlkc29jaWV0ZXMubGVuZ3RoID4gMCkgewogICAgICAgIGZpbHRlciA9IGZpbHRlci5jb25jYXQoCiAgICAgICAgICBmaWx0ZXIubGVuZ3RoID09PSAwID8gImNvbmRpdGlvbjoiIDogIjpzZXBhcmF0b3I6QU5EOmNvbmRpdGlvbjoiLAogICAgICAgICAgdGhpcy5zZXRmaWx0ZXIodGhpcy5pZHNvY2lldGVzLCAiaWRzb2NpZXRlIikKICAgICAgICApOwogICAgICB9CgogICAgICAvLyBTZXR0aW5nIGNvbmRpdGlvbiBvbiBEYXRlcwoKICAgICAgZmlsdGVyID0gZmlsdGVyLmNvbmNhdCgKICAgICAgICBmaWx0ZXIubGVuZ3RoID09PSAwID8gImNvbmRpdGlvbjoiIDogIjpzZXBhcmF0b3I6QU5EOmNvbmRpdGlvbjoiLAogICAgICAgICJkYXRlX2FjdGlvbjpiaWdnZXJ0aGFub3JlZ2FsOiIgKwogICAgICAgICAgdGhpcy5zdGFydERhdGUgKwogICAgICAgICAgIjpBTkQ6ZGF0ZV9hY3Rpb246bG93ZXJ0aGFub3JlZ2FsOiIgKwogICAgICAgICAgdGhpcy5lbmREYXRlCiAgICAgICk7CgogICAgICByZXR1cm4gZmlsdGVyOwogICAgfSwKICAgIHNldGZpbHRlcihsaXN0QXJyYXksIHBhcmFtKSB7CiAgICAgIGlmIChsaXN0QXJyYXkubGVuZ3RoID09PSAxKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtICsgIjplZ2FsOiIgKyBsaXN0QXJyYXlbMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHBhcmFtICsKICAgICAgICAgICI6ZWdhbDoiICsKICAgICAgICAgIGxpc3RBcnJheVswXSArCiAgICAgICAgICAiOk9SOiIgKwogICAgICAgICAgdGhpcy5zZXRmaWx0ZXIobGlzdEFycmF5LnNsaWNlKDEpLCBwYXJhbSkKICAgICAgICApOwogICAgICB9CiAgICB9LAogICAgZGlzcGF0Y2hBY3Rpb24oKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5sb2FkVGFza3MoMCkudGhlbigoaXRlbXMpID0+IHsKICAgICAgICAvLyBpbml0IGN1c3RvbVRhc2tzIHZhcmlhYmxlCiAgICAgICAgbGV0IHRhc2tzTGlzdCA9IFtdOwoKICAgICAgICAvLyBjaGFuZ2UgYWxsIGl0ZW1zIHdpdGggaWRhY3Rpb25fcGFyZW50IGVxdWFsIHRvIDAgdG8gbnVsbAogICAgICAgIHRhc2tzTGlzdCA9IGl0ZW1zLnNsaWNlKDAsIGl0ZW1zLmxlbmd0aCAtIDEpLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgaXRlbS5jb2xvciA9IHRoaXMudHlwZXZpZXcuY29sb3I7CiAgICAgICAgICBpdGVtLmJnQ29sb3IgPSB0aGlzLnR5cGV2aWV3LmNvbG9yOwoKICAgICAgICAgIGlmIChpdGVtLmlkYWN0aW9uX3BhcmVudCA9PT0gMCkgewogICAgICAgICAgICBpdGVtLmlkYWN0aW9uX3BhcmVudCA9ICIiOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSk7CgogICAgICAgIGxldCB0YXNrcyA9IHRhc2tzTGlzdDsKICAgICAgICAvLyBsb2FkIGxpbmtzCiAgICAgICAgbGV0IGxpbmtzID0gdGhpcy5sb2FkTGlua3ModGFza3NMaXN0KTsKCiAgICAgICAgdGhpcy5Dc2NoZWR1bGVMaXN0ID0gdGFza3M7CgogICAgICAgIC8vIGNyZWF0ZSBnYW50dCB3aXRoIHRhc2tzCiAgICAgICAgdGhpcy5nYW50dC51cGRhdGUoeyB0YXNrczogdGFza3NMaXN0IH0pOwoKICAgICAgICAvLyBjcmVhdGUgbGlua3MKICAgICAgICB0aGlzLmdhbnR0LnVwZGF0ZSh7IGxpbmtzOiBsaW5rcyB9KTsKCiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZFRhc2tzKG5iUGFnZSA9IDAsIG9uRHVlRGF0ZSA9IGZhbHNlKSB7CiAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICB1cmw6CiAgICAgICAgICB0aGlzLlVSSSArCiAgICAgICAgICB0aGlzLkFQSV9LRVkgKwogICAgICAgICAgIi8iICsKICAgICAgICAgIHRoaXMuZ2V0UXVlcnlQYXJhbShvbkR1ZURhdGUgPyAiZGF0ZV9lY2hlYW5jZSIgOiAiZGF0ZV9hY3Rpb24iKSArCiAgICAgICAgICAiLyIgKwogICAgICAgICAgbmJQYWdlLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICBsZXQgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLm1hcCgoZSkgPT4gewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBzdGFydDogZS5kYXRlX2FjdGlvbi52YWx1ZSwKICAgICAgICAgICAgICAgIGVuZDogZS5kYXRlX2Zpbi52YWx1ZSwKICAgICAgICAgICAgICAgIHRleHQ6IGUuc3VqZXQudmFsdWUsCiAgICAgICAgICAgICAgICBpZDogZS5pZGFjdGlvbi52YWx1ZS50b1N0cmluZygpLAogICAgICAgICAgICAgICAgY29tcGxldGU6IDAsCiAgICAgICAgICAgICAgICBpZGFjdGlvbl9wYXJlbnQ6IGUuaWRhY3Rpb25fcGFyZW50LAogICAgICAgICAgICAgICAgYm94OiB7CiAgICAgICAgICAgICAgICAgIGJhY2tDb2xvcjogIiNlOGVlZjciLAogICAgICAgICAgICAgICAgICBiYXJCYWNrQ29sb3I6CiAgICAgICAgICAgICAgICAgICAgb25EdWVEYXRlICYmIHRoaXMudHlwZXZpZXcuaW5kZXggIT0gImNvbG9yX3ByaW9yaXRlIgogICAgICAgICAgICAgICAgICAgICAgPyAiI2YyYTY0MCIKICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zZXRDb2xvcih0aGlzLnR5cGV2aWV3LCBlKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbCiAgICAgICAgICAgICAgLi4ucmVzdWx0LAogICAgICAgICAgICAgIHRoaXMubG9hZFRhc2tzKCsrbmJQYWdlLCBvbkR1ZURhdGUpLAogICAgICAgICAgICBdKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgfSk7CiAgICB9LAogICAgbG9hZExpbmtzKGhpZXJhY2hpcmFsVHJlZUFycmF5KSB7CiAgICAgIGxldCB0cmVlID0gaGllcmFjaGlyYWxUcmVlQXJyYXk7CiAgICAgIGxldCBpdGVtOwogICAgICBsZXQgaTsKICAgICAgbGV0IGxlbjsKICAgICAgbGV0IGlkOwogICAgICBsZXQgcGFyZW50OwogICAgICBsZXQgbGlua3MgPSBbXTsKCiAgICAgIC8vIGJ1aWxkIGxpbmtzCiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHRyZWUubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpdGVtID0gdHJlZVtpXTsKICAgICAgICBpZCA9IGl0ZW0uaWQ7CiAgICAgICAgcGFyZW50ID0gaXRlbS5pZGFjdGlvbl9wYXJlbnQudmFsdWU7CiAgICAgICAgaWYgKHBhcmVudCkgewogICAgICAgICAgLy8gbG9va3VwIGluZGV4IG9mIHBhcmVudAogICAgICAgICAgbGV0IHBhcmVudF9vYmplY3QgPSB0cmVlLmZpbmQoKGUpID0+IHsKICAgICAgICAgICAgcmV0dXJuIGUuaWQgPT09IHBhcmVudDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChwYXJlbnRfb2JqZWN0KSB7CiAgICAgICAgICAgIC8vIHNldCBwb3NpdGlvbiBieSBkYXRlIHN0YXJ0IGVuZAogICAgICAgICAgICBpZiAobW9tZW50KHBhcmVudF9vYmplY3Quc3RhcnQpLmlzQmVmb3JlKGl0ZW0uc3RhcnQpKSB7CiAgICAgICAgICAgICAgbGlua3MucHVzaCh7CiAgICAgICAgICAgICAgICBmcm9tOiBwYXJlbnQsCiAgICAgICAgICAgICAgICB0bzogaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAiRmluaXNoVG9TdGFydCIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobW9tZW50KHBhcmVudF9vYmplY3QuZW5kKS5pc0FmdGVyKGl0ZW0uZW5kKSkgewogICAgICAgICAgICAgIGxpbmtzLnB1c2goewogICAgICAgICAgICAgICAgZnJvbTogcGFyZW50LAogICAgICAgICAgICAgICAgdG86IGlkLAogICAgICAgICAgICAgICAgdHlwZTogIlN0YXJ0VG9TdGFydCIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbGlua3MucHVzaCh7CiAgICAgICAgICAgICAgICBmcm9tOiBwYXJlbnQsCiAgICAgICAgICAgICAgICB0bzogaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAiRmluaXNoVG9GaW5pc2giLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBsaW5rczsKICAgIH0sCiAgICB1cGRhdGVTdGFydERhdGUoKSB7CiAgICAgIGxldCBpbmRleCA9ICh0aGlzLm1vbnRocy5pbmRleE9mKHRoaXMubW9udGhfc2VsZWN0ZWQpICsgMSkudG9Mb2NhbGVTdHJpbmcoCiAgICAgICAgImVuLVVTIiwKICAgICAgICB7IG1pbmltdW1JbnRlZ2VyRGlnaXRzOiAyLCB1c2VHcm91cGluZzogZmFsc2UgfQogICAgICApOwogICAgICB0aGlzLmNvbmZpZy5zdGFydERhdGUgPSB0aGlzLnllYXJfc2VsZWN0ZWQgKyAiLSIgKyBpbmRleCArICItMDEiOwogICAgICAvLyB0aGlzLnN0YXJ0RGF0ZSA9IHRoaXMueWVhcl9zZWxlY3RlZCArICItIiArIGluZGV4ICsgIi0wMSI7CiAgICAgIHRoaXMuc2V0UmVuZGVyUmFuZ2VUZXh0KCk7CgogICAgICB0aGlzLmRpc3BhdGNoQWN0aW9uKCk7CiAgICB9LAogICAgaGllcmFjaGlyYWxUcmVlQXJyYXkoYXJyYXkpIHsKICAgICAgbGV0IHRyZWUgPSBbXTsKICAgICAgbGV0IGxvb2t1cCA9IHt9OwogICAgICBsZXQgaXRlbXM7CiAgICAgIGxldCBpdGVtOwogICAgICBsZXQgaTsKICAgICAgbGV0IGxlbjsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIGxldCBwYXJlbnQ7CgogICAgICBpdGVtcyA9IGFycmF5OwogICAgICBmb3IgKGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgICBsb29rdXBbaXRlbS5pZF0gPSBpdGVtOwogICAgICAgIHBhcmVudCA9IGxvb2t1cFtpdGVtLmlkYWN0aW9uX3BhcmVudC52YWx1ZV07CiAgICAgICAgaXRlbS5jaGlsZHJlbiA9IFtdOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgICBwYXJlbnQgPSBsb29rdXBbaXRlbS5pZGFjdGlvbl9wYXJlbnQudmFsdWVdOwogICAgICAgIGlmIChwYXJlbnQpIHsKICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKGl0ZW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0cmVlLnB1c2goaXRlbSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGkgPSAwLCBsZW4gPSB0cmVlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgaXRlbSA9IHRyZWVbaV07CiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBkZWxldGUgaXRlbS5jaGlsZHJlbjsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRyZWU7CiAgICB9LAogICAgdXBkYXRlVGFzayhhcmdzKSB7CiAgICAgIHZhciBlZiA9IHRoaXM7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoYXJncy5uZXdTdGFydCkudG9JU09TdHJpbmcoKTsKICAgICAgZGF0ZSA9IGRhdGUucmVwbGFjZSgiVCIsICIgIik7CiAgICAgIGRhdGUgPSBkYXRlLnNwbGl0KCIuIilbMF07CiAgICAgIHZhciBmaW4gPSBuZXcgRGF0ZShhcmdzLm5ld0VuZCk7CgogICAgICB2YXIgZGVidXQgPSBuZXcgRGF0ZShhcmdzLm5ld1N0YXJ0KTsKCiAgICAgIGNvbnN0IHRpbWVfZGlmZmVyZW5jZSA9IGZpbi5nZXRUaW1lKCkgLSBkZWJ1dC5nZXRUaW1lKCk7CiAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcih0aW1lX2RpZmZlcmVuY2UgLyAoMTAwMCAqIDYwICogNjApKTsKICAgICAgY29uc3QgcmVtYWluaW5nX21pbGxpc2Vjb25kcyA9IHRpbWVfZGlmZmVyZW5jZSAlICgxMDAwICogNjAgKiA2MCk7CiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHJlbWFpbmluZ19taWxsaXNlY29uZHMgLyAoMTAwMCAqIDYwKSk7CgogICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBpZGFjdGlvbjogYXJncy50YXNrLmRhdGEuaWQsCiAgICAgICAgZGF0ZV9hY3Rpb246IGRhdGUsCiAgICAgICAgZHVyZWVfaGV1cmVzOiBob3VycywKICAgICAgICBkdXJlZV9taW51dGVzOiBtaW51dGVzLAogICAgICB9KTsKCiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgbWV0aG9kOiAicHV0IiwKICAgICAgICB1cmw6IHRoaXMuVVJJX0FDVElPTiArIHRoaXMuQVBJX0tFWSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgIH0sCiAgICAgICAgZGF0YTogZGF0YSwKICAgICAgfTsKICAgICAgYXhpb3MoY29uZmlnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBlZi5nYW50dC50YXNrcy51cGRhdGUoYXJncy5lKTsKICAgICAgfSk7CiAgICB9LAogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0UmVuZGVyUmFuZ2VUZXh0KCk7CiAgICB0aGlzLmdhbnR0ID0gdGhpcy4kcmVmcy5nYW50dC5jb250cm9sOwogICAgdGhpcy5tb250aF9zZWxlY3RlZF9udW1iZXIgPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCk7CiAgICB0aGlzLm1vbnRoX3NlbGVjdGVkID0gdGhpcy5tb250aHNbdGhpcy5tb250aF9zZWxlY3RlZF9udW1iZXJdOwogICAgdGhpcy55ZWFyX3NlbGVjdGVkID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgdGhpcy5jdXJyZW50WWVhciA9IHRoaXMueWVhcl9zZWxlY3RlZDsKCiAgICBhd2FpdCB0aGlzLmxvYWRVc2VycygpOyAvLyBsb2FkaW5nIHVzZXJzIGxpc3QKICAgIHRoaXMuZGlzcGF0Y2hBY3Rpb24oKTsKICB9LAp9Owo="},{"version":3,"sources":["gantt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"gantt.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <section class=\"gantt\">\n    <b-loading\n      :is-full-page=\"isFullPage\"\n      v-model=\"isLoading\"\n      :can-cancel=\"true\"\n    ></b-loading>\n    <div class=\"column is-12\">\n      <div class=\"columns multiline px-6 py-2\">\n        <div class=\"column is-12-touch\">\n          <div class=\"columns is-vcentered is-left has-text-left is-mobile\">\n            <div class=\"column is-narrow\">\n              <div class=\"field is-horizontal\">\n                <label class=\"label pt-2\">Affichage : &nbsp;</label>\n                <div class=\"control\">\n                  <div class=\"dropdown\" v-bind:class=\"showing\">\n                    <div class=\"dropdown-trigger\">\n                      <button\n                        class=\"button\"\n                        aria-haspopup=\"true\"\n                        aria-controls=\"dropdown-menu\"\n                        @click=\"show\"\n                      >\n                        <span class=\"icon-text\">\n                          <span class=\"icon\">\n                            <em\n                              class=\"fas fa-circle\"\n                              v-bind:style=\"{ color: typeview.color }\"\n                            ></em>\n                          </span>\n                          <span>{{ typeview.title }}</span>\n                        </span>\n                        <span class=\"icon is-small\">\n                          <i class=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n                        </span>\n                      </button>\n                    </div>\n                    <div class=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\">\n                      <div class=\"dropdown-content\">\n                        <a\n                          class=\"dropdown-item\"\n                          v-for=\"(item, i) in arrayFilter\"\n                          :key=\"i\"\n                          :value=\"item.title\"\n                          @click=\"setView(item)\"\n                        >\n                          <span class=\"icon-text\">\n                            <span\n                              class=\"icon\"\n                              v-bind:style=\"{ color: item.color }\"\n                            >\n                              <em class=\"fas fa-circle\"></em>\n                            </span>\n                            <span>{{ item.title }}</span>\n                          </span>\n                        </a>\n                        <hr class=\"dropdown-divider\" />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"column is-narrow\">\n              <div class=\"field is-horizontal\">\n                <label class=\"label pt-2\">Utilisateurs : &nbsp;</label>\n                <div class=\"control\">\n                  <div class=\"select\">\n                    <multiselect\n                      v-model=\"selectedUsers\"\n                      :options=\"users\"\n                      :multiple=\"true\"\n                      :close-on-select=\"false\"\n                      :clear-on-select=\"false\"\n                      :preserve-search=\"true\"\n                      placeholder=\"Selectionnez\"\n                      label=\"name\"\n                      track-by=\"name\"\n                      :preselect-first=\"true\"\n                      @close=\"dispatchAction\"\n                    >\n                      <template slot=\"selection\" slot-scope=\"{ values, isOpen }\"\n                        ><span\n                          class=\"multiselect__single\"\n                          v-if=\"values.length &amp;&amp; !isOpen\"\n                          >{{ values.length }} selections</span\n                        ></template\n                      >\n                    </multiselect>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"column is-narrow\">\n              <div class=\"field is-horizontal\">\n                <div class=\"control\">\n                  <div class=\"select\">\n                    <select v-model=\"month_selected\" @change=\"updateStartDate\">\n                      <option\n                        v-for=\"(option, index) in months\"\n                        :value=\"option\"\n                        :key=\"index\"\n                      >\n                        {{ option }}\n                      </option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"column is-narrow\">\n              <div class=\"field is-horizontal\">\n                <div class=\"control\">\n                  <div class=\"select\">\n                    <select v-model=\"year_selected\" @change=\"updateStartDate\">\n                      <option\n                        v-for=\"year in [\n                          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n                          16, 17, 18, 19,\n                        ]\"\n                        :value=\"currentYear - year\"\n                        :key=\"year\"\n                      >\n                        {{ currentYear - year }}\n                      </option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <DayPilotGantt id=\"dp\" :config=\"config\" ref=\"gantt\" />\n  </section>\n</template>\n\n<script>\nimport { DayPilot, DayPilotGantt } from \"daypilot-pro-vue\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport Multiselect from \"vue-multiselect\";\nimport \"vue-multiselect/dist/vue-multiselect.min.css\";\n\nexport default {\n  name: \"Gantt\",\n  props: {\n    API_KEY: {\n      type: String,\n      default() {\n        return \"\";\n      },\n    },\n\n    URI: {\n      type: String,\n      default() {\n        return \"https://0002-zebridge-dev-externe.api.crm-simple.com/interactions/\";\n      },\n    },\n\n    URI_ACTION: {\n      type: String,\n      default() {\n        return \"https://0002-zebridge-dev-externe.api.crm-simple.com/interaction/\";\n      },\n    },\n\n    dataList: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n\n    USER_API: {\n      type: String,\n      default() {\n        return \"https://0002-zebridge-dev-externe.api.crm-simple.com/utilisateurs/\";\n      },\n    },\n    arrayFilter: {\n      type: Array,\n      default() {\n        return [\n          {\n            color: \"#2251ff\",\n            title: \"Défaut\",\n            index: \"color_defaut\",\n          },\n          {\n            color: \"#ffcedf0\",\n            title: \"Etat\",\n            index: \"color_etat\",\n          },\n          {\n            color: \"#25ffcd\",\n            title: \"Priorité\",\n            index: \"color_priorite\",\n          },\n          {\n            color: \"#de452a\",\n            title: \"Utilisateur\",\n            index: \"color_utilisateur\",\n          },\n          {\n            color: \"#cdee00\",\n            title: \"Type\",\n            index: \"color_type\",\n          },\n          {\n            color: \"#e19400\",\n            title: \"Priorité échéance\",\n            index: \"color_priorite_echeance\",\n          },\n        ];\n      },\n    },\n    idUtilisateurs: {\n      type: Array,\n      default() {\n        return [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n      },\n    },\n    idprojets: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    idcontacts: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    idsocietes: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n\n    months: {\n      type: Array,\n      default() {\n        return [\n          \"Janvier\",\n          \"Février\",\n          \"Mars\",\n          \"Avril\",\n          \"Mai\",\n          \"Juin\",\n          \"Juillet\",\n          \"Août\",\n          \"Septembre\",\n          \"Octobre\",\n          \"Novembre\",\n          \"Décembre\",\n        ];\n      },\n    },\n\n    month_selected_number: {\n      type: Number,\n      default() {\n        return new Date().getMonth();\n      },\n    },\n\n    month_selected: {\n      type: String,\n      default() {\n        return this.months[this.month_selected_number];\n      },\n    },\n\n    year_selected: {\n      type: Number,\n      default() {\n        return new Date().getFullYear();\n      },\n    },\n  },\n  data() {\n    return {\n      isFullPage: false,\n      isLoading: true,\n      startDate: \"\",\n      endDate: \"\",\n      config: {\n        cellWidthSpec: \"Fixed\",\n        cellWidth: 40,\n        timeHeaders: [\n          { groupBy: \"Month\", format: \"MMMM yyyy\" },\n          { groupBy: \"Week\" },\n          { groupBy: \"Day\", format: \"d\" },\n        ],\n        scale: \"Day\",\n        days: DayPilot.Date.today().daysInYear(),\n        startDate: DayPilot.Date.today().firstDayOfMonth(),\n        rowHeaderHideIconEnabled: false,\n        events: null,\n        row: {\n          bubbleHtml: \"Row bubble\",\n        },\n        columns: [\n          {\n            title: \"Liste des tâches\",\n            width: 50,\n            property: \"text\",\n          },\n        ],\n        locale: \"fr-fr\",\n        rowMoveHandling: \"Disabled\",\n        onRowMoved: (args) => {\n          var data = {};\n\n          var config = {\n            method: \"put\",\n            url: this.URI_ACTION + this.API_KEY,\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            data: data,\n          };\n          if (args.position === \"child\") {\n            data = JSON.stringify({\n              idaction: args.kf.data.task.id,\n              idaction_parent: args.lf.data.task.id,\n            });\n\n            config.data = data;\n            axios(config).then(() => {\n              this.gantt.tasks.update(args.e);\n            });\n          } else {\n            data = JSON.stringify({\n              idaction: args.kf.data.task.id,\n              idaction_parent: null,\n            });\n\n            config.data = data;\n            axios(config).then(() => {\n              this.gantt.tasks.update(args.e);\n            });\n          }\n        },\n        taskMoveHandling: \"Update\",\n        onTaskResized: (args) => {\n          this.updateTask(args);\n        },\n        onTaskMoved: (args) => {\n          this.updateTask(args);\n        },\n        linkCreateHandling: \"Update\",\n        onLinkCreated: (args) => {\n          console.log(\"onLinkCreated\", args);\n\n          var data = {};\n\n          var config = {\n            method: \"put\",\n            url: this.URI_ACTION + this.API_KEY,\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            data: data,\n          };\n\n          let to_Start_date = args.target.start().value;\n          let from_start_date = args.source.start().value;\n\n          config.data = data;\n          if (moment(to_Start_date).isSameOrAfter(from_start_date)) {\n            data = JSON.stringify({\n              idaction: args.to,\n              idaction_parent: args.from,\n            });\n\n            axios(config).then(() => {\n              this.gantt.tasks.update(args.e);\n            });\n          } else {\n            // unlink\n            let findLink = this.gantt.links.findByFromTo(args.from, args.to);\n            if (findLink) this.gantt.links.remove(findLink);\n          }\n        },\n        rowCreateHandling: \"Enabled\",\n        onRowCreate: (args) => {\n          console.log(\"onRowCreate\", args);\n          var ef = this;\n          var today = new Date();\n          //format date to YYYY-MM-dd hh:mm:ss\n          var date =\n            today.getFullYear() +\n            \"-\" +\n            (today.getMonth() + 1) +\n            \"-\" +\n            today.getDate() +\n            \" \" +\n            today.getHours() +\n            \":\" +\n            today.getMinutes() +\n            \":\" +\n            today.getSeconds();\n\n          // format date from 2022-1-1 to 2022-01-01 with moment\n          date = moment(date).format(\"YYYY-MM-DD HH:mm:ss\");\n\n          var data = JSON.stringify({\n            sujet: args.text,\n            date_action: date,\n            color: \"#9e5fff\",\n            duree_heures: \"24\",\n            duree_minutes: \"00\",\n          });\n\n          var config = {\n            method: \"post\",\n            url: this.URI_ACTION + this.API_KEY,\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            data: data,\n          };\n          axios(config).then(function (response) {\n            ef.gantt.tasks.add({\n              id: DayPilot.guid(),\n              text: args.text,\n              start: new DayPilot.Date().getDatePart(),\n              end: new DayPilot.Date().getDatePart().addDays(1),\n              idaction: response.data.idaction,\n            });\n          });\n        },\n      },\n      locale: \"fr-FR\",\n      currentYear: \"\",\n      gantt: null,\n      users: [],\n      selectedUsers: [],\n      CscheduleList: [],\n      showing: \"\",\n      typeview: {\n        title: \"Selectionnez\",\n        color: \"#2251ff\",\n        index: \"color_defaut\",\n      },\n    };\n  },\n  components: {\n    DayPilotGantt,\n    Multiselect,\n  },\n  methods: {\n    show() {\n      this.showing = this.showing.length === 0 ? \"is-active\" : \"\";\n    },\n\n    setView(type) {\n      this.typeview = type;\n      this.show();\n      this.dispatchAction();\n    },\n    setColor(type, data) {\n      let color = type.color;\n      try {\n        const jsondata = data.color.value;\n        color = JSON.parse(jsondata)[type.index];\n      } catch (error) {\n        console.log(\"undefined color data\");\n      }\n\n      return color;\n    },\n    isUserSelected(idUser) {\n      return this.idUtilisateurs.find(idUser) > 0;\n    },\n    async loadUsers() {\n      await axios({\n        method: \"get\",\n        url: this.USER_API + this.API_KEY,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      })\n        .then((response) => {\n          if (response.data.result === 1) {\n            this.users = response.data.data.map((el) => {\n              return {\n                id: el.idutilisateur.value.toString(),\n                name: el.nom_utilisateur.value.toString(),\n              };\n            });\n            this.selectedUsers = this.users.filter(\n              (x) => x.id in this.idUtilisateurs\n            );\n          } else {\n            console.log(response.data.err_message);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    generateQueryFor(dataArray, dataParam, result) {\n      if (dataArray.length > 0) {\n        result = result.concat(\n          result.length === 0 ? \"condition:\" : \":separator:AND:condition:\",\n          this.setfilter(dataArray, dataParam)\n        );\n      }\n      return result;\n    },\n    setRenderRangeText() {\n      let index = (this.months.indexOf(this.month_selected) + 1).toLocaleString(\n        \"en-US\",\n        { minimumIntegerDigits: 2, useGrouping: false }\n      );\n\n      this.startDate = this.year_selected + \"-\" + index + \"-01\";\n\n      this.endDate = this.year_selected + \"-\" + index + \"-31\";\n    },\n    getQueryParam() {\n      /**\n       *@param none\n       *@author Jacques\n       *@Resume : figure out  filter on API request\n       *@example : condition:idutilisateur:egal:1:OR:idutilisateur:egal:4:separator:AND:condition:idprojet:egal:1:OR:idprojet:egal:4060:separator:AND:condition:idsociete:egal:4:OR:idsociete:egal:2234\n       **/\n\n      let filter = \"\";\n      // filtering users\n      if (this.selectedUsers.length > 0) {\n        filter = filter.concat(\n          filter.length === 0 ? \"condition:\" : \":separator:AND:condition:\",\n          this.setfilter(\n            this.selectedUsers.map((e) => {\n              return e.id;\n            }),\n            \"idutilisateur\"\n          )\n        );\n      }\n\n      // idprojet\n      if (this.idprojets.length > 0) {\n        filter = filter.concat(\n          filter.length === 0 ? \"condition:\" : \":separator:AND:condition:\",\n          this.setfilter(this.idprojets, \"idprojet\")\n        );\n      }\n\n      // idcontact\n      if (this.idcontacts.length > 0) {\n        filter = filter.concat(\n          filter.length === 0 ? \"condition:\" : \":separator:AND:condition:\",\n          this.setfilter(this.idcontacts, \"idcontact\")\n        );\n      }\n\n      // idsociete\n      if (this.idsocietes.length > 0) {\n        filter = filter.concat(\n          filter.length === 0 ? \"condition:\" : \":separator:AND:condition:\",\n          this.setfilter(this.idsocietes, \"idsociete\")\n        );\n      }\n\n      // Setting condition on Dates\n\n      filter = filter.concat(\n        filter.length === 0 ? \"condition:\" : \":separator:AND:condition:\",\n        \"date_action:biggerthanoregal:\" +\n          this.startDate +\n          \":AND:date_action:lowerthanoregal:\" +\n          this.endDate\n      );\n\n      return filter;\n    },\n    setfilter(listArray, param) {\n      if (listArray.length === 1) {\n        return param + \":egal:\" + listArray[0];\n      } else {\n        return (\n          param +\n          \":egal:\" +\n          listArray[0] +\n          \":OR:\" +\n          this.setfilter(listArray.slice(1), param)\n        );\n      }\n    },\n    dispatchAction() {\n      this.isLoading = true;\n      this.loadTasks(0).then((items) => {\n        // init customTasks variable\n        let tasksList = [];\n\n        // change all items with idaction_parent equal to 0 to null\n        tasksList = items.slice(0, items.length - 1).map((item) => {\n          item.color = this.typeview.color;\n          item.bgColor = this.typeview.color;\n\n          if (item.idaction_parent === 0) {\n            item.idaction_parent = \"\";\n          }\n          return item;\n        });\n\n        let tasks = tasksList;\n        // load links\n        let links = this.loadLinks(tasksList);\n\n        this.CscheduleList = tasks;\n\n        // create gantt with tasks\n        this.gantt.update({ tasks: tasksList });\n\n        // create links\n        this.gantt.update({ links: links });\n\n        this.isLoading = false;\n      });\n    },\n    async loadTasks(nbPage = 0, onDueDate = false) {\n      return axios({\n        method: \"get\",\n        url:\n          this.URI +\n          this.API_KEY +\n          \"/\" +\n          this.getQueryParam(onDueDate ? \"date_echeance\" : \"date_action\") +\n          \"/\" +\n          nbPage,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      })\n        .then((response) => {\n          if (response.data.data.length > 0) {\n            let result = response.data.data.map((e) => {\n              return {\n                start: e.date_action.value,\n                end: e.date_fin.value,\n                text: e.sujet.value,\n                id: e.idaction.value.toString(),\n                complete: 0,\n                idaction_parent: e.idaction_parent,\n                box: {\n                  backColor: \"#e8eef7\",\n                  barBackColor:\n                    onDueDate && this.typeview.index != \"color_priorite\"\n                      ? \"#f2a640\"\n                      : this.setColor(this.typeview, e),\n                },\n              };\n            });\n            return Promise.all([\n              ...result,\n              this.loadTasks(++nbPage, onDueDate),\n            ]);\n          } else {\n            return [];\n          }\n        })\n        .catch(() => {\n          return [];\n        });\n    },\n    loadLinks(hierachiralTreeArray) {\n      let tree = hierachiralTreeArray;\n      let item;\n      let i;\n      let len;\n      let id;\n      let parent;\n      let links = [];\n\n      // build links\n      for (i = 0, len = tree.length; i < len; i++) {\n        item = tree[i];\n        id = item.id;\n        parent = item.idaction_parent.value;\n        if (parent) {\n          // lookup index of parent\n          let parent_object = tree.find((e) => {\n            return e.id === parent;\n          });\n\n          if (parent_object) {\n            // set position by date start end\n            if (moment(parent_object.start).isBefore(item.start)) {\n              links.push({\n                from: parent,\n                to: id,\n                type: \"FinishToStart\",\n              });\n            } else if (moment(parent_object.end).isAfter(item.end)) {\n              links.push({\n                from: parent,\n                to: id,\n                type: \"StartToStart\",\n              });\n            } else {\n              links.push({\n                from: parent,\n                to: id,\n                type: \"FinishToFinish\",\n              });\n            }\n          }\n        }\n      }\n      return links;\n    },\n    updateStartDate() {\n      let index = (this.months.indexOf(this.month_selected) + 1).toLocaleString(\n        \"en-US\",\n        { minimumIntegerDigits: 2, useGrouping: false }\n      );\n      this.config.startDate = this.year_selected + \"-\" + index + \"-01\";\n      // this.startDate = this.year_selected + \"-\" + index + \"-01\";\n      this.setRenderRangeText();\n\n      this.dispatchAction();\n    },\n    hierachiralTreeArray(array) {\n      let tree = [];\n      let lookup = {};\n      let items;\n      let item;\n      let i;\n      let len;\n      // eslint-disable-next-line no-unused-vars\n      let parent;\n\n      items = array;\n      for (i = 0, len = items.length; i < len; i++) {\n        item = items[i];\n        lookup[item.id] = item;\n        parent = lookup[item.idaction_parent.value];\n        item.children = [];\n      }\n\n      for (i = 0, len = items.length; i < len; i++) {\n        item = items[i];\n        parent = lookup[item.idaction_parent.value];\n        if (parent) {\n          parent.children.push(item);\n        } else {\n          tree.push(item);\n        }\n      }\n\n      for (i = 0, len = tree.length; i < len; i++) {\n        item = tree[i];\n        if (item.children.length === 0) {\n          delete item.children;\n        }\n      }\n      return tree;\n    },\n    updateTask(args) {\n      var ef = this;\n      var date = new Date(args.newStart).toISOString();\n      date = date.replace(\"T\", \" \");\n      date = date.split(\".\")[0];\n      var fin = new Date(args.newEnd);\n\n      var debut = new Date(args.newStart);\n\n      const time_difference = fin.getTime() - debut.getTime();\n      const hours = Math.floor(time_difference / (1000 * 60 * 60));\n      const remaining_milliseconds = time_difference % (1000 * 60 * 60);\n      const minutes = Math.floor(remaining_milliseconds / (1000 * 60));\n\n      var data = JSON.stringify({\n        idaction: args.task.data.id,\n        date_action: date,\n        duree_heures: hours,\n        duree_minutes: minutes,\n      });\n\n      var config = {\n        method: \"put\",\n        url: this.URI_ACTION + this.API_KEY,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        data: data,\n      };\n      axios(config).then(function () {\n        ef.gantt.tasks.update(args.e);\n      });\n    },\n  },\n  async mounted() {\n    this.setRenderRangeText();\n    this.gantt = this.$refs.gantt.control;\n    this.month_selected_number = new Date().getMonth();\n    this.month_selected = this.months[this.month_selected_number];\n    this.year_selected = new Date().getFullYear();\n    this.currentYear = this.year_selected;\n\n    await this.loadUsers(); // loading users list\n    this.dispatchAction();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/variables.scss\";\n</style>\n"]}]}